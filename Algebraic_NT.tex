\documentclass{article}
%build with recipe latexmk
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{fancyhdr}
\pagestyle{fancy}

\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{babel}
\usepackage{enumerate}
\usepackage{amsmath, amssymb, amsthm}
%\usepackage{a4wide}
\usepackage{float}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{setspace}
\setstretch{1.1}
\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true, %set true if you want colored links
    linktoc=all,     %set to all if you want both sections and subsections linked
    linkcolor=black,  %choose some color if you want links to stand out
}

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{example}{Example}[section]
\newtheorem{defn}{Definition}[section]

\title{Part III - Algebraic Number Theory
    \\ \large
    Lectured by Hanneke Wiersema 
}
 
\author{Artur Avameri}
\date{}
 
\setcounter{section}{-1}
 
\begin{document}
\maketitle
\tableofcontents
\newpage
 
\section{Introduction}

\marginpar{19 Jan 2024, Lecture 1}


The lecturer will provide typed notes at the end of the course. The topics of the course are
\begin{itemize}
    \item global class field theory;
    \begin{itemize}
        \item both ideal--theoretic and idele--theoretic.
    \end{itemize}
    \item zeta functions;
    \item $L$--series;
    \item density theorems.
\end{itemize} 

\subsection{Rough goals of class field theory.}
\begin{enumerate}[(1)]
    \item Given a number field $K$, what are its abelian extensions? If $K = \mathbb{Q}$, we have the Kronecker--Weber theorem (which we will prove): Every finite abelian extension of $\mathbb{Q}$ is contained in some cyclotomic field, i.e. by adjoining a complex root of unity to $\mathbb{Q}$. We write $\mathbb{Q}(\zeta_n)$ for $\zeta_n = e^{2\pi i/n}$. 
    \vspace{1mm}
     
    Finite abelian extensions of $\mathbb{Q}$ can be generated by special values of the exponential function $e^{2\pi i z}$. It is an open problem to explicitly construct all abelian extensions for arbitrary number fields. Kronecker solved the case of imaginary quadratic fields using special values of analytic functions (elliptic and modular functions).
    \vspace{1mm}
     
    In class field theory, we classify extensions introducing the notion of a \textbf{class field}: for any $K$ we will show that any finite abelian extension will be contained in a class field. Moreover, the Galois group of this extension will be isomorphic to the generalized ideal class group (in the ideal case) or a subgroup of the Idele class group (in the idele case).
    \item Given a finite abelian extension, how do the prime ideals in the smaller field behave in the extension? In the quadratic case, we will prove quadratic reciprocity. There exist higher reciprocity laws. The most general answer we will see is the decomposition law, which is a consequence of the Artin reciprocity theorem.
\end{enumerate} 
\textbf{Warning.} There is no one convention for the notation for many objects -- different textbooks may use different notation.
\vspace{1mm}
 
\subsection{Review of basic Algebraic Number Theory}
Let $K$ be a number field and write $\mathcal{O}_K$ for its ring of integers. This is a Dedekind domain, so any ideal has a unique factorization into a product of prime ideals. Let $L/K$ be an extension of number fields and and $\mathfrak{p}$ a prime ideal of $K$. Then $\mathfrak{p}\mathcal{O}_L$ is an ideal of $L$ and by unique factorization $\mathfrak{p}\mathcal{O}_L = \mathcal{P}_1^{e_1}\ldots \mathcal{P}_g^{e_g}$ with $\mathcal{P}_i$ distinct prime ideals in $\mathcal{O}_L$. Write $\mathcal{P}_i \mid \mathfrak{p}$ to mean that $\mathcal{P}_i$ appears in the factorization of $\mathcal{O}_L$. The number $e_i$ is called the ramification index $\mathcal{P}_1/\mathfrak{p}$. We also write $e_i = e_{\mathcal{P}_i/\mathfrak{p}}$. 
\begin{itemize}
    \item If $e_i=1$ for all $i$, we say $\mathfrak{p}$ is unramified in $L$.
    \item If $e_i>1$ for some $i$, we say $\mathfrak{p}$ is ramified.
    \item If there is a unique prime $\mathcal{P}$ dividing $\mathfrak{p}$ with $e_{\mathcal{P}/\mathfrak{p}} = [L:K]$, we say $\mathfrak{p}$ is totally ramified.
    \item If $\mathfrak{p}\mathcal{O}_L$ is prime, we say $\mathfrak{p}$ is inert (or remains inert) in $L$.
    \item If $g = [L:K]$, we say $\mathfrak{p}$ splits completely.
\end{itemize}
The quotient $\mathcal{O}_K/\mathfrak{p}$ is a finite field of characteristic $p$ ($\mathfrak{p} \cap \mathbb{Z} = p\mathbb{Z}$), called a residue field. If $\mathcal{P}/\mathfrak{p}$ (for $\mathcal{P} \in \mathcal{O}_L, \mathfrak{p} \in \mathcal{O}_K$), view $\mathcal{O}_K/\mathfrak{p}$ as a subfield of $\mathcal{O}_L/\mathcal{P}$. We call $f_{\mathcal{P}/\mathfrak{p}} = [\mathcal{O}_L/\mathcal{P} : \mathcal{O}_K/\mathfrak{p}]$ the residue field degree. If as before $\mathfrak{p}\mathcal{O}_L = \mathcal{P}_1^{e_1}\ldots \mathcal{P}_g^{e_g}$, then $\sum_{i=1}^{g} e_{\mathcal{P}_i/\mathfrak{p}} f_{\mathcal{P}_i/\mathfrak{p}} = [L:K]$. If $L/K$ is Galois, then the Galois group permutes the $\mathcal{P}_i$ transitively, so $e_1 = \ldots = e_g = e$. Also if $L/K$ is Galois, $f_{\mathcal{P}_1/\mathfrak{p}} = \ldots f_{\mathcal{P}_g/\mathfrak{p}} = f$, so $efg = [L:K]$. Recall also that 
\begin{itemize}
    \item We can find the factorization of $\mathfrak{p}\mathcal{O}_L$ using the Kummer--Dedekind theorem.
    \item A prime $\mathfrak{p}$ in $\mathcal{O}_K$ ramifies in $L/K$ if and only if $\mathfrak{p} \mid d_{L/K}$ for $d_{L/K}$ the discriminant.
\end{itemize}
If $L/K$ is Galois, write $\text{Gal}(L/K)$ for the Galois group. Let $\mathcal{P}$ be a prime ideal in $\mathcal{O}_L$.

\begin{defn}
    The \textbf{decomposition subgroup} of $\mathcal{P}$ is $$D_{\mathcal{P}} = \{\sigma \in \text{Gal}(L/K) \mid \sigma(\mathcal{P}=\mathcal{P})\}.$$
    The \textbf{inertial subgroup} of $\mathcal{P}$ is \[
    I_{\mathcal{P}} = \{\sigma \in \text{Gal}(L/K) \mid \sigma(\alpha) \equiv \alpha \pmod{\mathcal{P} ~\forall \alpha \in \mathcal{O}_L}\}.
    \]
\end{defn}
\textbf{Remark.} We have $I_{\mathcal{P}} \subset D_{\mathcal{P}}$. Easy exercise: show this.
\vspace{1mm}
 
Let $\sigma \in D_\mathcal{P}$. This induces an automorphism $\overline{\sigma} : \mathcal{O}_L/\mathcal{P} \to \mathcal{O}_L/\mathcal{P}$ such that $\overline{\sigma}|_{\mathcal{O}_K/\mathfrak{p}} = \text{Id}|_{\mathcal{O}_K/\mathfrak{p}}$ for $\mathfrak{p} = \mathcal{P} \cap \mathcal{O}_K$. This gives a map $D_{\mathcal{P}} \to \text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$ by $\sigma \mapsto \overline{\sigma}$.

\begin{prop}\label{prop0.1}
    \begin{enumerate}[(i)]
        \item The Galois group $\text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$ is a cyclic group with canonical generator the Frobenius automorphism $x \mapsto x^q$ for $q = |\mathcal{O}_K/\mathfrak{p}|$.
        \item The map $D_{\mathcal{P}} \stackrel{\sigma \mapsto \overline{\sigma}}{\to} \text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$ defines a surjective homomorphism with kernel $I_{\mathcal{P}}$.
        \item $|I_{\mathcal{P}}| = e_{\mathcal{P}/\mathfrak{p}}$ and $|D_{\mathcal{P}}| = e_{\mathcal{P}/\mathfrak{p}}f_{\mathcal{P}/\mathfrak{p}}$.
    \end{enumerate}
\end{prop}
Recall that if $\mathfrak{p}$ is a prime in $\mathcal{O}_K$ and $\mathcal{P}$ is a prime in $\mathcal{O}_L$ such that $\mathcal{P} \mid  \mathfrak{p}$, then the norm of $\mathcal{P}$ is $N_{L/K}(\mathcal{P}) = \mathfrak{p}^{f_{\mathcal{P}/\mathfrak{p}}}$. Note that if $\mathfrak{p}$ is a prime of $K$, we also write $N(\mathfrak{p})$ for $N_{K/\mathbb{Q}}(\mathfrak{p})$ and $N(\mathfrak{p}) = |\mathcal{O}_K/\mathfrak{p}|$.

\section{The Artin symbol}
\begin{lemma}
    Let $L/K$ be a Galois extension and let $\mathfrak{p}$ be a prime of $\mathcal{O}_K$, unramified in $L$. Suppose $\mathcal{P} \subset  \mathcal{O}_L$ such that $\mathcal{P} \mid  \mathfrak{p}$. Then there exists a unique element $\sigma \in \text{Gal}(L/K)$ such that for all $\alpha \in \mathcal{O}_L$,\[
    \sigma(\alpha) \equiv \alpha^{N(\mathfrak{p})} \pmod{\mathcal{P}}.
    \]
\end{lemma}
\begin{proof}
    Let $\sigma \in D_{\mathcal{P}}$ and $\overline{\sigma} \in \text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$ its image under the map from Proposition \ref{prop0.1}. By assumption, $\mathfrak{p}$ is unramified, so $|I_{\mathcal{P}}| = 1$, hence by Proposition \ref{prop0.1} again, we have $D_{\mathcal{P}} \stackrel{(\star)}{\cong}  \text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$. Recall that $\text{Gal}((\mathcal{O}_L/\mathcal{P})/ (\mathcal{O}_K/\mathfrak{p}))$ is generated by $x \mapsto x^q$ for $q = |\mathcal{O}_K/\mathfrak{p}|$. Let $\sigma \in D_{\mathcal{P}}$ be the unique element in $D_{\mathcal{P}}$ which maps to the Frobenius under $(\star)$. Then $\sigma(\alpha) \equiv \alpha^q \pmod{\mathcal{P}}$ for all $\alpha \in \mathcal{O}_L$ and $q = |\mathcal{O}_K/\mathfrak{p}| = N(\mathfrak{p})$. Uniqueness follows since any $\sigma \in \text{Gal}(L/K)$ satisfying this condition will be an element of $D_{\mathcal{P}}$.
\end{proof}
\marginpar{22 Jan 2024, Lecture 2}

\begin{defn}
    This unique element is called the \textbf{Artin symbol} and we denote it by $\left(\frac{L/K}{\mathcal{P}}\right)$.
\end{defn}
\begin{defn}
    Let $p$ be an odd prime and let $a$ be any integer. Recall that the \textbf{Legendre symbol} is $\left( \frac{a}{p}\right) = \begin{cases}
        1 &\text{ if} a \text{ is a QR mod }p.\\
        -1&\text{ if } a \text{ is not a QR mod }p.\\
        0 &\text{ if }a \equiv 0\pmod{p}.
    \end{cases}$
    Now let $n \in \mathbb{Z}$ be nonzero and write $ = u p_1^{k_1}\ldots p_u^{r_u}$ for $u = \pm 1$. Again let $a$ be an integer, then the \textbf{Kronecker symbol} is \[
    \left(\frac{a}{n}\right) = \left(\frac{a}{u}\right) \prod_{i=1}^{k} \left(\frac{a}{p_i}\right)^{r_i}
    \]
    with $\left(\frac{a}{p_i}\right)$ the Legendre symbol for odd primes, $\left(\frac{a}{2}\right) = \begin{cases}
        0 &a \equiv 0\pmod{2}\\
        1&a \equiv \pm 1 \pmod{8}\\
        -1 &a \equiv \pm 3 \pmod{8}
    \end{cases}$
    and $\left(\frac{a}{1}\right) =1$, $\left(\frac{a}{-1}\right) = \begin{cases}
        -1 & a<0\\
        1 &a\ge 0.
    \end{cases}$
\end{defn}
\textbf{The quadratic case.} Let $K=\mathbb{Q}$, $L = \mathbb{Q}(\sqrt{N})$ for $N\neq 0,1$ squarefree. Recall that \[
d_{L/\mathbb{Q}} = \begin{cases}
    N & N \equiv 1 \pmod{4}\\
    4N& N \not\equiv 1 \pmod{4}
\end{cases}
\]
with \[
\mathcal{O}_L = \begin{cases}
    \mathbb{Z}\left[\frac{1+\sqrt{N}}{2}\right] & N \equiv 1 \pmod{4}\\
    \mathbb{Z}[\sqrt{N}] & N \not\equiv 1\pmod{4}.
\end{cases}
\]
Then $\text{Gal}(L/K)$ has order 2 with $1 : \sqrt{N} \to \sqrt{N}$ and $\sigma: \sqrt{N} \to -\sqrt{N}$ and we can identify $\text{Gal}(L/K)$ with $\{\pm 1\}$. 
\vspace{1mm}
 
Let $\mathfrak{p}$ be unramified in $L$ and $\mathcal{P} \subset \mathcal{O}_L$ a prime lying above it (so $\mathcal{P} \mid \mathfrak{p}$). We then get $\sigma(\alpha) \equiv \alpha^{\mathfrak{p}} \pmod{\mathcal{P}}$ for all $\alpha \in \mathcal{O}_L$. We have \[
\left(\frac{L/K}{\mathfrak{p}}\right) = \left(\frac{\mathbb{Q}(\sqrt{N})/\mathbb{Q}}{\mathcal{P}}\right) = \left(\frac{d_{L/\mathbb{Q}}}{p}\right) = \pm 1
\]
since $p \nmid d_{L/\mathbb{Q}}$ (more on this on Ex. Sheet 1).
\begin{prop}
    Suppose $p$ is unramified in $L$. Then $p$ splits in $L$ if and only if $\left(\frac{d_{L/\mathbb{Q}}}{p}\right) = 1$.
\end{prop}
The Artin symbol tells us about the decomposition, but more generally:
\begin{lemma}
    Let $L/K$ be any Galois extension. Let $\mathfrak{p} \subset \mathcal{O}_K$ be unramified with $\mathcal{P} \subset \mathcal{O}_L$ lying above it. Then:
    \begin{enumerate}[(i)]
        \item Let $\sigma \in \text{Gal}(L/K)$. Then $\sigma \left(\frac{L/K}{\mathcal{P}}\right)\sigma^{-1} = \left(\frac{L/K}{\sigma(\mathcal{P})}\right)$.
        \item The order of $\left(\frac{L/K}{\mathcal{P}}\right)$ is the residue field degree $f = f_{\mathcal{P}/\mathfrak{p}}$.
        \item The prime $\mathfrak{p}$ splits completely in $L$ if and only if $\left(\frac{L/K}{\mathcal{P}}\right) = 1$ (i.e. the Artin map is trivial).
    \end{enumerate}
\end{lemma}
\begin{proof}
    Exercise!
\end{proof}
\begin{defn}
    In this course, we say $L/K$ is an abelian extension if it is a Galois extension of number fields with abelian Galois group $\text{Gal}(L/K)$.
\end{defn}
Suppose $L/K$ is abelian and let $\mathfrak{p} \subset \mathcal{O}_K$ be unramified. Let $\mathcal{P}, \mathcal{P}' \subset \mathcal{O}_L$ be distinct prime ideals lying above $\mathfrak{p}$. Then $\mathcal{P}' = \sigma(\mathcal{P})$ for some $\sigma \in \text{Gal}(L/K)$. Since the group is abelian, we find
\[
\left(\frac{L/K}{\mathcal{P}'}\right) = \left(\frac{L/K}{\sigma(\mathcal{P})}\right) = \sigma\left(\frac{L/K}{\mathcal{P}}\right)\sigma^{-1} = \left(\frac{L/K}{\mathcal{P}}\right).
\]
\textbf{Notation.} If $L/K$ is abelian, we also write $\left(\frac{L/K}{\mathfrak{p}}\right)$ for the Artin symbol for any $\mathcal{P} \mid \mathfrak{p}$. So for $L/K$ abelian, the Artin symbol defines a map 
\begin{align*}
    \{\text{unramified primes }\mathfrak{p} \subset \mathcal{O}_K \text{ in }L\} &\to \text{Gal}(L/K) \\
    \mathfrak{p} &\mapsto \left(\frac{L/K}{\mathfrak{p}}\right).
\end{align*}
We want to extend this map, for which we introduce fractional ideals. Quick review: recall that a \textbf{fractional ideal} of a number field $K$ is a $\mathcal{O}_K$--submodule $\mathfrak{a}$ of $K$ such that there exists $0 \neq x \in \mathcal{O}_K$ such that $x \mathfrak{a} \subset \mathcal{O}_K$. Equivalently, it is a set of the form $\alpha I$ for $\alpha \in K$ and some ideal $I$ of $\mathcal{O}_K$.
\vspace{1mm}
 
A principal fractional ideal is a $\mathcal{O}_K$--submodule generated by a single nonzero element of $K$. Since $\mathcal{O}_K$ is a Dedekind domain, each fractional ideal is invertible and we obtain a group with identity $\mathcal{O}_K$.
\vspace{1mm}
 
\textbf{Notation.} Write $I_K$ for the group of fractional ideals and $P_K$ for the subgroup of principal fractional ideals. The quotient $I_K/P_K$ is called the \textbf{ideal class group} $\text{Cl}(K)$, which is a finite abelian group with order $h_K$ called the \textbf{class number} of $K$.
\vspace{1mm}
 
Recall that for any $\mathfrak{a} \in I_K$, we have unique factorization \[
\mathfrak{a} = \prod_{i=1}^{n} \mathfrak{p}_i^{r_i}, r_i \in \mathbb{Z}
\]
with $\mathfrak{p}_i$ distinct prime ideals in $\mathcal{O}_K$.

\begin{defn}
    Suppose $L/K$ is an abelian unramified extension (i.e. every prime in $K$ is unramified in $L$). Then we define the \textbf{Artin map} to be the homomorphism \[
    \left(\frac{L/K}{\cdot }\right) : I_K \to \text{Gal}(L/K)
    \]
    by setting $\left(\frac{L/K}{\mathfrak{a}}\right) = \prod_{i=1}^{n} \left(\frac{L/K}{\mathfrak{p}_i}\right)^{r_i}$.
\end{defn}
To define this more generally, we need to define \textbf{moduli}.
\vspace{1mm}
 
\textbf{Interlude.} Finite and infinite primes. Let $K$ be a number field. Then a prime ideal is also called a finite prime to distinguish it from infinite primes. Infinite primes are determined by the embeddings of $K$ into $\mathbb{C}$. These correspond to archimedean absolute values (from local fields).
\vspace{1mm}
 
A real infinite prime is an embedding $\sigma: K \to \mathbb{R}$ and a complex infinite prime is a pair of conjugate embeddings $\sigma, \overline{\sigma}: K \to \mathbb{C}$ with $\sigma \neq \overline{\sigma}$. 
\begin{example}
    \begin{itemize}
        \item $\mathbb{Q}$ has one infinite real prime $\sigma\left(\frac{a}{b}\right) = \frac{a}{b}$.
        \item $\mathbb{Q}(\sqrt{2})$ has two infinite real primes $\sigma_1(\sqrt{2}) =\sqrt{2}$ and $\sigma_2(\sqrt{2}) = -\sqrt{2}$.
        \item $\mathbb{Q}(\sqrt{-2})$ has one infinite complex prime determined by $\sigma(\sqrt{-2})=\sqrt{-2}$, $\overline{\sigma}(\sqrt{-2})=-\sqrt{-2}$.
    \end{itemize}
\end{example}
\textbf{Remark.} If we have an extension $L/K$, then an infinite prime $\sigma$ of $K$ \textbf{ramifies} in $L$ is $\sigma$ is real, but has an extension to $L$ which is complex.
\begin{example}
    The infinite prime of $\mathbb{Q}$ is unramified in $\mathbb{Q}(\sqrt{2})$, but it is ramified in $\mathbb{Q}(\sqrt{-2})$.
\end{example}
\begin{defn}
    Let $K$ be a number field. Then a \textbf{modulus} in $K$ is a formal product \[
        \mathfrak{m} = \prod_{\mathfrak{p}}^{} \mathfrak{p}^{n_{\mathfrak{p}}}
    \]
    over all primes $\mathfrak{p}$, finite or infinite, of $K$, such that
    \begin{enumerate}[(i)]
        \item $n_{\mathfrak{p}}\ge 0$, and at most finitely many of these are nonzero.
        \item $n_{\mathfrak{p}} = 0$ for $\mathfrak{p}$ infinite complex primes.
        \item $n_{\mathfrak{p}} \le 1$ for $\mathfrak{p}$ infinite real primes.
    \end{enumerate}
    If $n_{\mathfrak{p}} = 0$ for all $\mathfrak{p}$, set $\mathfrak{m} = 1$.
\end{defn}
Note that if $K$ is a purely imaginary field (i.e. it has no real primes), then a modulus of $K$ is just an ideal of $\mathcal{O}_K$. We can write any modulus $\mathfrak{m}$ as a product $\mathfrak{m} = \mathfrak{m}_0 \mathfrak{m}_{\infty}$, where $\mathfrak{m}_0$ is an ideal of $\mathcal{O}_K$ and $\mathfrak{m}_{\infty}$ is a product of distinct real infinite primes. 

\end{document}
