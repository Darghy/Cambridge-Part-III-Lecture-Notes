\documentclass{article}
%build with recipe latexmk
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{fancyhdr}
\pagestyle{fancy}

\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{babel}
\usepackage{enumerate}
\usepackage{mathtools}
\usepackage{amsmath, amssymb, amsthm}
%\usepackage{a4wide}
\usepackage{float}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{setspace}
\setstretch{1.1}
\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true, %set true if you want colored links
    linktoc=all,     %set to all if you want both sections and subsections linked
    linkcolor=black,  %choose some color if you want links to stand out
}

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{example}{Example}[section]
\newtheorem{defn}{Definition}[section]

\title{Part III - Local Fields
    \\ \large
    Lectured by Rong Zhou 
}
 
\author{Artur Avameri}
\date{Michaelmas 2023}
 
\setcounter{section}{-1}
 
\begin{document}
\maketitle
\tableofcontents
\newpage
 
\section{Introduction}

This is a first class in graduate algebraic number theory. Something we'd like to do is solve diophantine equations, e.g. $f(x_1,\ldots,x_r) \in \mathbb{Z}[x_1,\ldots,x_r]$. In general, solving $f(x_1,\ldots,x_r) = 0$ is very difficult. A simpler question we might consider is solving $f(x_1,\ldots,x_r) \equiv 0 \pmod{p}$, or $\pmod{p^2}, \pmod{p^3}$, etc. Local fields package all of this information together. 

\section{Absolute values}
\begin{defn}
    Let $K$ be a field. An \textbf{absolute value} on $K$ is a function $|\cdot| : K \to \mathbb{R}_{\ge 0}$ satisfying:
    \begin{enumerate}[(1)]
        \item $|x| = 0 \iff x = 0$.
        \item $|xy| = |x||y| ~\forall x,y \in K$.
        \item $|x+y|\le |x|+|y| ~\forall x,y \in K$ (triangle inequality).
    \end{enumerate}
\end{defn}
We say that $(K, |\cdot|)$ is a \textbf{valued field}.
Examples:
\begin{itemize}
    \item Take $K=\mathbb{Q},\mathbb{R},\mathbb{C}$ with the usual absolute value $|a+ib| = \sqrt{a^2+b^2}$. We call this $|\cdot |_{\infty}$.
    \item For $K$ any field, we have the trivial absolute value $|x| = \begin{cases}
        0 & \text{ if } x = 0\\
        1 & \text{ else.}
    \end{cases}$
    We will ignore this in this course.
    \item Take $K= \mathbb{Q}$ and $p$ a prime. For $0 \neq x \in \mathbb{Q}$, write $x = p^n \frac{a}{b}$ where $(a,p)=(b,p)=1$. Then the \textbf{$p$--adic absolute value} is defined to be \[
    |x|_p = \begin{cases}
        0 & x=0\\
        p^{-n} & x = p^n\frac{a}{b}.
    \end{cases}
    \] 
    We can check the axioms:
    \begin{enumerate}[(1)]
        \item The first axiom is clear.
        \item $$|xy|_p = \left|p^{n+m}\frac{ac}{bd}\right|_p = p^{-(n+m)} = |x|_p|y|_p.$$
        \item WLOG let $m\ge n$. Then \[
        |x+y|_p = \left|p^n\left(\frac{ad+p^{m-n}bc}{bd}\right)\right|_p \le p^{-n} = \max(|x|_p, |y|_p).
        \]
    \end{enumerate}
\end{itemize}

Any absolute value $|\cdot |$ on $K$ induces a metric $d(x,y) = |x-y|$ on $K$, hence induces a topology on $K$.

\begin{defn}
    Suppose we have two absolute values $|\cdot |, |\cdot |'$ on $K$. We say these absolute values are \textbf{equivalent} if they induce the same topology. An equivalence class is called a \textbf{place}.
\end{defn}
\begin{prop}
    Let $|\cdot|, |\cdot|'$ be (nontrivial) absolute values on $K$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $|\cdot|$ and $|\cdot|'$ are equivalent.
        \item $|x| < 1 \iff |x|' < 1 ~\forall x \in K$.
        \item $\exists c \in \mathbb{R}_{>0}$ such that $|x|^c = |x'| ~\forall x \in K$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (i) $\implies $(ii): $|x|<1 \iff x^n \to 0$ with respect to $|\cdot| \iff x^n \to 0$ with respect to $|\cdot|'$ (since the topologies are the same) $\iff |x|'<1$. 
    \vspace{1mm}
     
    (ii) $\implies $(iii): Note that $|x|^c = |x|' \iff c \log |x| = \log |x|'$. Take $a \in K^\times$ such that $|a| > 1$. This exists since $|\cdot|$ is nontrivial. We need to show that $\forall x \in K^\times,$\[
     \frac{\log |x|}{\log |a|} = \frac{\log|x|'}{\log|a|'}.
    \]
    Assume $\frac{\log |x|}{\log |a|} < \frac{\log|x|'}{\log|a|'}.$ Choose $m, n \in \mathbb{Z}$ such that $\frac{\log |x|}{\log |a|} < \frac{m}{n} < \frac{\log|x|'}{\log|a|'}.$ We then have 
    \begin{align*}
        &\begin{cases}
            &n \log |x| < m \log |a|\\
            &n \log |x|' > m \log|a|'
        \end{cases}\\
        \implies & \left|\frac{x^n}{a^m}\right|<1, \left|\frac{x^n}{a^m}\right|' > 1,
    \end{align*}
    a contradiction. The other inequality is analogous.
    \vspace{1mm}
     
    (iii) $\implies$ (i): Clear, since they have the same open balls.
\end{proof}

\textbf{Remark.} $|\cdot|_{\infty}^2$ on $\mathbb{C}$ is not an absolute value by our definition (doesn't satisfy the triangle inequality). Some authors replace the triangle inquality by the condition $|x+y|^{\beta} \le |x|^{\beta} + |y|^{\beta}$ for some fixed $\beta \in \mathbb{R}_{>0}$. The equivalence classes are the same in either case.

In this course, we will mainly be interested in the following:

\begin{defn}
    An absolute value $|\cdot|$ on $K$ is said to be \textbf{non-archimedean} if it satisfies the \textbf{ultrametric inequality} \[
    |x+y|\le \max(|x|,|y|).
    \]
    If $|\cdot|$ is not non-archimedean, we say it is \textbf{archimedean}. 
\end{defn}
\begin{example}
    \begin{itemize}
        \item $|\cdot|_{\infty}$ on $\mathbb{R}$ is archimedean.
        \item $|\cdot|_{p}$ on $\mathbb{Q}$ is non--archimedean.
    \end{itemize}
\end{example}

\begin{lemma}
    Let $(K, |\cdot|)$ be non--archimedean and $x,y \in K$. If $|x|<|y|$, then $|x-y|= |y|$.
\end{lemma}
\begin{proof}
    On the one hand, $|x-y|\le \max(|x|,|y|) = |y|$ (using $|x|=|-x|$).
    \vspace{1mm}
     
    On the other, $|y| \le \max(|x|, |x-y|) = |x-y|$.
\end{proof}

Convergence is easier in non--archimedean fields:
\begin{prop}
    Let $(K,|\cdot|)$ be non--archimedean and $(x_n)_{n=1}^{\infty}$ a sequence on $K$. If $|x_n-x_{n+1}| \to 0$, then $(x_n)_{n=1}^{\infty}$ is Cauchy. In particular, if $K$ is complete, then the sequence converges.
\end{prop}
\begin{proof}
    For $\epsilon > 0 $, choose $N$ such that $|x_n-x_{n+1}| < \epsilon$ for $n \ge N$. Then for $N<n<m$, \[
    |x_n - x_m| = |(x_n - x_{n+1}) + (x_{n+1} - x_{n+2}) + \ldots + (x_{m-1}-x_m)| < \epsilon,
    \]
    so $(x_n)$ is Cauchy.
\end{proof}
\begin{example}
    For $p=5$, we can construct a sequence in $\mathbb{Q}$ satisfying:
    \begin{enumerate}[(i)]
        \item $x_n^2+1 \equiv  0 \pmod{5^n}$,
        \item $x_n \equiv x_{n+1} \pmod{5^n}$.
    \end{enumerate}
    We construct it by induction. Take $x_1=2$. Now suppose we've constructed $x_n$ and write $x_n^2+1 = a\cdot 5^n$ and set $x_{n+1} = x_n + b\cdot 5^n$. We compute \[
    x_{n+1}^2 + 1 = x_n^2 + 2b x_n 5^n + b^2 5^{2n} + 1 = a5^n + 2bx_n 5^n + \underbrace{b^2 5^{2n}}_{\equiv 0 \text{ (mod }5^{n+1})} + 1. 
    \]
    Hence we choose $b$ such that $a+2bx_n \equiv 0 \pmod{5}$ and we're done. 
    \vspace{1mm}
     
    Now (ii) tells us that $(x_n)$ is Cauchy, but we claim it doesn't converge. Suppose it does, $x_n \to l \in \mathbb{Q}$. Then $x_n^2 \to l^2 \in \mathbb{Q}$. But by (i), $x_n^2 \to -1$, so $l^2 = -1$, a contradiction.
\end{example}
This tells us that $(\mathbb{Q}, |\cdot|_{5})$ is not complete.
\begin{defn}
    The $p$--adic numbers $\mathbb{Q}_p$ are the completion of $\mathbb{Q}$ with respect to $|\cdot|_p$.
\end{defn}

\marginpar{10 Oct 2022, Lecture 2}

Let $(K,|\cdot|)$ be a non--archimedean valued field. For $x \in K$ and $r \in \mathbb{R}_{>0}$, we define $B(x,r) = \{y \in K \mid |y-x|<r\}$ and $\overline{B} = \{y \in K \mid |y-x|\le r\}$ to be the open and closed balls of radius $r$.

\begin{lemma}
    \begin{enumerate}[(i)]
        \item If $z \in B(x,r)$, then $B(z,r) = B(x,r)$, i.e. open balls don't have centers.
        \item If $z \in \overline{B}(x,r)$, then $\overline{B}(x,r) = \overline{B}(z,r)$.
        \item $B(x,r)$ is closed.
        \item $\overline{B}(x,r)$ is open.
    \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}[(i)]
        \item Let $y \in B(x,r)$. Then $|x-y|<r \implies |z-y| = |(z-x) + (x-y)| \le \max(|z-x|,|x-y|) < r$, so $B(x,r) \subset B(z,r)$. The reverse inclusion is analogous.
        \item Analogous to (i) by replacing $<$ with $\le$.
        \item Let $y \in K \setminus B(x,r)$. If $z \in B(x,r) \cap B(y,r)$, then $B(x,r) = B(z,r) = B(y,r)$ by (i), so $y \in B(x,r)$, a contradiction. Hence $B(x,r) \cap B(y,r) = \varnothing$. Since $y$ was arbitrary, $K \setminus B(x,r)$ is open, so $B(x,r)$ is closed.
        \item If $z \in \overline{B}(x,r)$, then $B(z,r) \subset \overline{B}(z,r) \stackrel{\text{(ii)}}{=} \overline{B}(x,r)$.
    \end{enumerate}
\end{proof}

\section{Valuation rings}
\begin{defn}
    Let $K$ be a field. A \textbf{valuation} on $K$ is a function $v : K^\times \to \mathbb{R}$ such that 
    \begin{enumerate}[(i)]
        \item $v(xy) = v(x)+v(y)$.
        \item $v(x+y) \ge \min(v(x),v(y))$.
    \end{enumerate}
\end{defn}
Fix $0<\alpha<1$. If $v$ is a valuation on $K$, then $|x| = \begin{cases}
    \alpha^{v(x)} & x \neq 0\\
    0 & x = 0
\end{cases}$
determines a non--archimedean absolute value on $K$. Conversely, a non--archimedean absolute value on $K$ determines a valuation $v(x) = \log_{\alpha} |x|$.

\textbf{Remark.} We ignore the trivial evaluation $v(x)=0 ~\forall x \in K$, which  corresponds to the trivial absolute value.

\begin{defn}
    We say valuations $v_1,v_2$ are equivalent if $\exists c \in \mathbb{R}_{>0}$ such that $v_1(x) = cv_2(x) ~\forall x \in K^{\times}$.
\end{defn}
\begin{example}
    \begin{itemize}
        \item If $K=\mathbb{Q}$, $v_p(x) = -\log_p |x|_p$ is the $p$--adic valuation.
        \item Let $k$ be a field. Let $K=k(t) = \text{Frac}(k[t])$ be a rational function field. We let \[
        v\left(t^n \frac{f(t)}{g(t)}\right) = n
        \]
        for $f, g \in k[t]$, $f(0)\neq 0, g(0) \neq 0$. This is called a $t$--adic valuation.
        \item Let $K = k((t)) = \text{Frac}(k[[t]]) = \{\sum_{i=n}^{\infty} a_i t^i \mid a_i \in k, n \in \mathbb{Z}\}$, the field of formal Laurent series over $k$. We define \[
        v\left(\sum_{i}^{} a_i t^i\right) = \min \{i \mid a_i \neq 0\},
        \]
        the $t$--adic valuation on $K$.
    \end{itemize}
\end{example}
\begin{defn}
    Let $(K, |\cdot|)$ be a non--archimedean valued field. The \textbf{valuation ring} of $K$ is defined to be \[
    \mathcal{O}_K = \{x \in K \mid |x|\le 1\}.
    \]
    (i.e. the closed unit ball, $\mathcal{O}_K = \overline{B}(0,1)$, or ${\mathcal{O}_K = \{x \in K^{\times} \mid v(x) \ge  0\} \cup \{0\}}$).
\end{defn}
\begin{prop}
    \begin{enumerate}[(i)]
        \item $\mathcal{O}_K$ is an open subring of $K$.
        \item The subsets $\{x \in K \mid |x|\le r\}$ and $\{x \in K \mid |x|< r\}$ for $r\le 1$ are open ideals in $\mathcal{O}_K$.
        \item $\mathcal{O}_K^\times = \{x \in K \mid |x|=1\}$.
    \end{enumerate}
\end{prop}
\begin{proof}
    \begin{enumerate}[(i)]
        \item We find:
        \begin{itemize}
            \item $|0|=0$ and $|1|=1$, so $0,1 \in \mathcal{O}_K$.
            \item If $x \in \mathcal{O}_K$, then $|-x|=|x| \implies -x \in \mathcal{O}_K$. 
            \item If $x,y \in \mathcal{O}_K$, then $|x+y|\le \max(|x|,|y|)\le 1$, so $x+y \in \mathcal{O}_K$. 
            \item If $x,y \in \mathcal{O}_K$, then $|xy| = |x||y| \le 1$, so $xy \in \mathcal{O}_K$.
        \end{itemize}
        Thus $\mathcal{O}_K$ is a subring, and since $\mathcal{O}_K = \overline{B}(0,1)$, it is open.
        \item As $r\le 1$, $\{x \in K \mid |x|\le r\} = \overline{B}(0,r) \subset \mathcal{O}_K$, so it is open. We find:
        \begin{itemize}
            \item If $x, y \in \overline{B}(0,r)$, then $|x+y|\le \max(|x|,|y|) \le r$, so $x+y \in \overline{B}_r$.
            \item If $x \in \mathcal{O}_K, y \in \overline{B}_r$, then $|xy|=|x||y|\le 1 \cdot |y|\le r$, so $xy \in \overline{B}_r$.
        \end{itemize}
        Hence this is an open ideal. The proof for $\{x \in K \mid |x|< r\}$ is analogous.
        \item Note that $|x||x^{-1}|= |x x^{-1}| = 1$. Thus $|x| = 1 \iff |x^{-1}| = 1 \iff x,x^{-1} \in \mathcal{O}_K \iff x \in \mathcal{O}_K^\times$.
    \end{enumerate}
\end{proof}

\textbf{Notation.} Let $\mathfrak{m} = \{x \in \mathcal{O}_K \mid |x|<1\}$. It turns out this is a maximal ideal in $\mathcal{O}_K$. Also let $\mathfrak{k} = \mathcal{O}_K/\mathfrak{m}$, the residue field. 

\begin{cor}
    $\mathcal{O}_K$ is a \textbf{local ring} (i.e. a ring with a unique maximal ideal) with unique maximal ideal $\mathfrak{m}$.
\end{cor}
\begin{proof}
    Let $\mathfrak{m'}$ be a maximal ideal. If $\mathfrak{m'} \neq \mathfrak{m}$, then $\exists x \in \mathfrak{m'}\setminus \mathfrak{m}$. Hence $|x|= 1$, so by (iii) above, $x$ is a unit, so $\mathfrak{m'}=\mathcal{O}_K$, a contradiction.
\end{proof}

\begin{example}
    $K=\mathbb{Q}$ with $|\cdot|_p$. Then $\mathcal{O}_K = \mathbb{Z}_{(p)} = \{\frac{a}{b} \in \mathbb{Q} \mid p \nmid b\}$. In this case, $\mathfrak{m} = p\mathbb{Z}_{(p)}$ and $\mathfrak{k} = \mathbb{F}_p$.
\end{example}

\begin{defn}
    Let $v:K^{\times} \to \mathbb{R}$ be a valuation. If $v(K^{\times}) \cong \mathbb{Z}$, then we say $v$ is a \textbf{discrete valuation}. In this case, $K$ is said to be a \textbf{discretely valued field}. 
    \vspace{1mm}
     
    An element $\pi \in \mathcal{O}_K$ is said to be a \textbf{uniformizer} if $v(\pi)>0$ and $v(\pi)$ generates $v(K^\times)$.
\end{defn}
\begin{example}
    \begin{itemize}
        \item $K=\mathbb{Q}$ with the $p$--adic valuation and $K=k(t)$ with the $t$--adic valuation are discretely valued fields.
        \item $K=k(t)(t^{\frac{1}{2}}, t^{\frac{1}{4}}, t^{\frac{1}{8}},\ldots)$ with the $t$--adic valuation is not a discretely valued field.
    \end{itemize}
\end{example}
\textbf{Remark.} If $v$ is a discrete valuation, we can scale $v$, i.e. replace it with an equivalent valuation such that $v(K^\times) = \mathbb{Z}$. Such $v$ are called \textbf{normalized valuations}. Then $\pi$ is a uniformizer $\iff v(\pi) = 1$.

\begin{lemma}
    Let $v$ be a valuation on $K$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $v$ is discrete;
        \item $\mathcal{O}_K$ is a PID;
        \item $\mathcal{O}_K$ is Noetherian;
        \item $\mathfrak{m}$ is principal.
    \end{enumerate}
\end{lemma}
\begin{proof}
    (i) $\implies$ (ii): $\mathcal{O}_K \subset K$, so $\mathcal{O}_K$ is an integral domain. Let $I \subset \mathcal{O}_K$ be a nonzero ideal and pick $x \in I$ such that $v(x) = \min \{v(a) \mid a \in I, a \neq 0\}$, which exists as $v$ is discrete. Then we claim that $x \mathcal{O}_K = \{a \in \mathcal{O}_K \mid v(a)\ge v(x)\}$ is equal to $I$. The inclusion $x\mathcal{O}_K\subset I$ is clear, as $I$ is an ideal. For $x\mathcal{O}_K\supset I$, let $y \in I$, then $v(x^{-1}y) = v(y) - v(x) \ge 0 \implies y = x(x^{-1}y) \in x \mathcal{O}_K$.
    \vspace{1mm}
     
    (ii) $\implies $ (iii): Clear, as being a PID means every ideal is generated by one element, i.e. by finitely many. 
    \vspace{1mm}
     
    (iii) $\implies $ (iv): Write $\mathfrak{m} = x_1 \mathcal{O}_K +\ldots+ x_n \mathcal{O}_K$ and WLOG assume $v(x_1)\le v(x_2)\le \ldots\le v(x_n)$. Then $x_2,\ldots,x_n \in x_1 \mathcal{O}_K$, since $x_1 \mathcal{O}_K = \{a \in \mathcal{O}_K \mid v(a) \ge v(x_1)\}$, so $\mathfrak{m} = x_1 \mathcal{O}_K$.
    \vspace{1mm}
     
    (iv) $\implies $ (i): Let $\mathfrak{m} = \pi \mathcal{O}_K$ for some $\pi \in \mathcal{O}_K$ and let $c = v(\pi)$. Then if $v(x)>0$, i.e. $x \in \mathfrak{m}$, then $v(x) \ge c$. Thus $v(K^\times) \cap (0,c) = \varnothing$. Since $v(K^\times)$ is a subgroup of $(\mathbb{R}, +)$, we have $v(K^{\times}) = c\mathbb{Z}$.
\end{proof}

\marginpar{12 Oct 2022, Lecture 3}

\textbf{Remark.} Let $v$ be a discrete valuation on $K$, $\pi \in \mathcal{O}_K$ a uniformizer. For $x \in K^{\times}$, let $n \in \mathbb{Z}$ such that $v(x) = n v(\pi)$. Then $u = x \pi^{-n} \in \mathcal{O}_K^{\times}$ and $x = u \pi^n$. In particular, $K = \mathcal{O}_K \left[\frac{1}{\pi}\right]$ and hence $K = \text{Frac}(\mathcal{O}_K)$.

\begin{defn}
    A ring $R$ is called a \textbf{discrete valuation ring} (DVR) if it is a PID with exactly one nonzero prime ideal (which is then necessarily maximal).
\end{defn}
\begin{lemma}
    \begin{enumerate}[(i)]
        \item Let $v$ be a discrete valuation on $K$. Then $\mathcal{O}_K$ is a DVR.
        \item Let $R$ be a DVR. Then there exists a valuation $v$ on $K = \text{Frac}(R)$ such that $R = \mathcal{O}_K$.
    \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}[(i)]
        \item $\mathcal{O}_K$ is a PID by the previous lemma, hence any nonzero prime ideal is maximal. Since $\mathcal{O}_K$ is a local ring, it is a DVR.
        \item Let $R$ be a DVR with maximal ideal $\mathfrak{m}$. Then $\mathfrak{m} = (\pi)$ for $\pi \in R$. Since PIDs are UFDs, we can write any nonzero $x \in R$ uniquely as $\pi^n u$ for some $n \ge 0$, $u$ a unit (since $\pi$ is the only prime). Then any $y \in K^{\times}$ can be written uniquely as $\pi^m u$, $m \in \mathbb{Z}$. Define $v(\pi^m u) = m$. Exercise: check that this is a valuation and $R = \mathcal{O}_K$.
    \end{enumerate}
\end{proof}
\begin{example}
    $\mathbb{Z}_{(p)}$, $R[[t]]$ for $R$ a field are DVRs.
\end{example}

\section{$p$--adic numbers}

Recall that $\mathbb{Q}_p$ is the completion of $\mathbb{Q}$ with respect to $|\cdot|_p$. It is an exercise on example sheet 1 to show that $\mathbb{Q}_p$ is a field. Moreover, $|\cdot|_p$ extends to $\mathbb{Q}_p$ and the associated valuation is discrete (example sheet again).
\begin{defn}
    The \textbf{ring of $p$--adic integers} $\mathbb{Z}_p$ is the valuation ring  \[
    \mathbb{Z}_p = \{x \in \mathbb{Q}_p \mid |x|_p \le 1\}.
    \]
\end{defn}
\textbf{Facts.} $\mathbb{Z}_p$ is a DVR and has a principal maximal ideal $p\mathbb{Z}_p$. In $\mathbb{Z}_p$, all nonzero ideals are given by $p^n \mathbb{Z}_p$. 
\begin{prop}
    $\mathbb{Z}_p$ is the closure of $\mathbb{Z}$ inside $\mathbb{Q}_p$. In particular, $\mathbb{Z}_p$ is the completion of $\mathbb{Z}$ with respect to $|\cdot|_p$.
\end{prop}
\begin{proof}
    We need to show $\mathbb{Z}$ is dense in $\mathbb{Z}_p$. Note $\mathbb{Q}$ is dense in $\mathbb{Q}_p$. Since $\mathbb{Z}_p \subset \mathbb{Q}_p$ is open, $\mathbb{Z}_p \cap \mathbb{Q}$ is dense in $\mathbb{Z}_p$. But $$\mathbb{Z}_p \cap \mathbb{Q} = \{x \in \mathbb{Q}\mid |x|_p \le 1\} = \left\{\frac{a}{b} \in \mathbb{Q} \mid  p \nmid b\right\} = \mathbb{Z}_{(p)}.$$
    Thus it suffices to show that $\mathbb{Z}$ is dense in $\mathbb{Z}_{(p)}$. Let $\frac{a}{b} \in \mathbb{Z}_{(p)}$ with $a,b \in \mathbb{Z}$ and $p \nmid b$. For $n \in \mathbb{N}$, choose $y_n \in \mathbb{Z}$ such that $by_n \equiv a \pmod{p^n}$. Then $y_n \to \frac{a}{b}$ as $n \to \infty$. 
    \vspace{1mm}
     
    For the last part, note that $\mathbb{Z}_p$ is complete (as it is a closed subset of a complete space) and $\mathbb{Z} \subset \mathbb{Z}_p$ is dense.
\end{proof}

\textbf{Inverse limits.} Let $(A_n)_{n=1}^\infty$ be a sequence of sets/groups/rings together with homomorphisms $\phi_n : A_{n+1} \to A_n$ (called \textbf{transition maps}). Then the \textbf{inverse limit} of $(A_n)_{n=1}^\infty$ is the set/group/ring \[
\underset{n}{\varprojlim} A_n = \left\{(a_n)_{n=1}^\infty \in \prod_{n=1}^{\infty} A_n \mid \phi_n(a_{n+1}) = a_n ~\forall n\right\}. 
\]
\textbf{Fact.} If $A_n$ is a group/ring, then the inverse limit is also a group/ring. Here the group/ring operations are defined componentwise. Let $\theta_m : \underset{n}{\varprojlim} A_n \to A_m$ denote the natural projection.
\vspace{1mm}
 
The inverse limit satisfies the following universal property:
\begin{prop}
    For any set/group/ring $B$ together with homomorphisms $\psi_n : B \to A_n$ such that the following diagram commutes,
    \[\begin{tikzcd}[row sep=large,column sep=large]
        B & A_{n+1} \\
        & A_n
        \arrow["\psi_{n+1}", from=1-1, to=1-2]
        \arrow["\psi_n", from=1-1, to=2-2]
        \arrow["\phi_n", from=1-2, to=2-2]
    \end{tikzcd}\]
    there exists a unique homomorphism $\psi : B \to \underset{n}{\varprojlim} A_n$ such that $\theta_n \circ \psi = \psi_n$ for all $n$.
\end{prop} 
\begin{proof}
    Define $\psi : B \to \prod_{n=1}^{\infty} A_n$ by $b \mapsto (\psi_n(b))_{n=1}^{\infty}$. Then $\psi_n = \theta_n \circ \psi_{n+1} \implies \psi(b) \in \underset{n}{\varprojlim} A_n$. This map is clearly unique (determined by $\psi_n = \phi_n \circ \psi_{n+1}$), and is a homomorphism of sets/groups/rings.
\end{proof}
\begin{defn}
    Let $I \subset R$ be an ideal (in a ring $R$). The \textbf{$I$--adic completion of $R$} is the ring $\hat{R} = \underset{n}{\varprojlim} R/I^n$ where $R/I^{n+1} \to R/I^n$ is the natural projection.
\end{defn}
Note that there exists a natural map $i : R \to \hat{R}$ by the universal property (since there exist maps $R \to R/I^n$).
\begin{defn}
    We say $R$ is \textbf{$I$--adically complete} if $i$ is an isomorphism.
\end{defn}
\textbf{Fact.} $\text{ker}(i : R \to \hat{R}) = \bigcap_{n=1}^{\infty} I^n$ (check!). 
\vspace{1mm}
 
Let $(K, |\cdot|)$ be a non--archimedean valued field and $\pi \in \mathcal{O}_K$  such that $|\pi|<1$.
\begin{prop}
    Assume $K$ is complete with respect to $|\cdot|$. Then:
    \begin{enumerate}[(i)]
        \item $\mathcal{O}_K \stackrel{i}{\cong} \underset{n}{\varprojlim} \mathcal{O}_K/\pi^n \mathcal{O}_K$ (i.e. $\mathcal{O}_K$ is $\pi$--adically complete)\footnote{There a bit of abuse of notation here -- really, $\mathcal{O}_K$ is $(\pi)$--adically complete.}.
        \item Every $x \in \mathcal{O}_K$ can be written uniquely as $x = \sum_{i=0}^{\infty} a_i \pi^i$ with $a_i \in A$, where $A \subset \mathcal{O}_K$ is a set of coset representatives for $\mathcal{O}_K/\pi \mathcal{O}_K$. Moreover, any such power series converges (in $\mathcal{O}_K$).
    \end{enumerate}
\end{prop} 
\begin{proof}
    \begin{enumerate}[(i)]
        \item $K$ is complete and $\mathcal{O}_K \subset K$ is closed, so $\mathcal{O}_K$ is complete. If $x \in \bigcap_{n=1}^{\infty} \pi^n \mathcal{O}_K$, then $v(x) \ge n v(\pi) ~\forall n \implies x = 0$, hence the natural map $\mathcal{O}_K \to \underset{n}{\varprojlim} \mathcal{O}_K/\pi^n \mathcal{O}_K$ is injective.
        
        For surjectivity, let $(x_n)_{n=1}^{\infty} \in \underset{n}{\varprojlim}\mathcal{O}_K/ \pi^n \mathcal{O}_K$ and for each $n$, let $y_n \in \mathcal{O}_K$ be a lifting\footnote{Given a surjective map $G \to G'$, a lift of an element $x \in G'$ is a choice of $y \in G$ such that $y \mapsto x$ under this map.} of $x_n \in \mathcal{O}_K/\pi^n \mathcal{O}_K$. Then $y_n - y_{n+1}  \in \pi^n \mathcal{O}_K$, thus $(y_n)_{n=1}^{\infty}$ is a Cauchy sequence in $\mathcal{O}_K$. Let $y_n \to y \in \mathcal{O}_K$. Then $y$ maps to $(x_n)_{n=1}^\infty$ in $\underset{n}{\varprojlim} \mathcal{O}_K/\pi^n \mathcal{O}_K$.
        \item Left as exercise on example sheet 1.
    \end{enumerate}
\end{proof}
\begin{cor}
    \begin{enumerate}[(i)]
        \item $\mathbb{Z}_p \cong \underset{n}{\varprojlim} \mathbb{Z}/p^n \mathbb{Z}$.
        \item Every element in $\mathbb{Q}_p$ can be written uniquely as $x = \sum_{i=n}^{\infty} a_i p^i$ where we have $a_i \in \{0,1,\ldots,p-1\}$.
    \end{enumerate}
\end{cor}
\marginpar{14 Oct 2022, Lecture 4}
\begin{proof}
    \begin{enumerate}[(i)]
        \item By the previous proposition, it suffices to show that $\mathbb{Z}/p^n\mathbb{Z} \cong \mathbb{Z}_p/p^n\mathbb{Z}$. Let $f_n : \mathbb{Z} \to \mathbb{Z}_p/p^n \mathbb{Z}_p$ be the natural map. Then $\text{ker}(f_n) =\{x \in \mathbb{Z} \mid |x|_p \le p^{-n}\} = p^n\mathbb{Z}$, thus the natural map $\mathbb{Z}/p^n\mathbb{Z} \to \mathbb{Z}_p/p^n \mathbb{Z}_p$ is injective. For surjectivity, take $\overline{z} \in \mathbb{Z}_p/p^n \mathbb{Z}_p$ and $c \in \mathbb{Z}_p$ a lift. Since $\mathbb{Z}$ is dense in $\mathbb{Z}_p$, there exists $x \in \mathbb{Z}$ such that $x \in c + p^n \mathbb{Z}_p$ ($p^n \mathbb{Z}_p$ is open in $\mathbb{Z}_p$). Then $f_n(x) = \overline{z}$, so $Z/p^n \mathbb{Z} \to \mathbb{Z}_p / p^n \mathbb{Z}_p$ is surjective.
        \item Follows from the second part of the previous proposition applied to $p^{-n} x \in \mathbb{Z}_p$ for some $n \in \mathbb{Z}$.
    \end{enumerate}
\end{proof}

\begin{example}
    We have $\frac{1}{1-p} = 1 + p + p^2 + p^3 + \ldots$ in $\mathbb{Q}_p$.
\end{example}

\section{Complete valued fields}

\subsection{Hensel's lemma}

\begin{theorem}[Hensel's lemma, version 1]
    Let $(K, |\cdot|)$ be a complete discretely valued field. Let $f(x) \in \mathcal{O}_K[x]$ and assume $\exists a \in \mathcal{O}_K$ such that $|f(a)| < |f'(a)|^2$ for $f'(a)$ the formal derivative. Then there exists a unique $x \in \mathcal{O}_K$ such that $f(x)=0$ and $|x-a|< |f'(a)|$.
\end{theorem}
\begin{proof}
    Let $\pi \in \mathcal{O}_K$ be a uniformizer and let $r = v(f'(a))$ where $v$ is a normalized valuation, i.e. $v(\pi)=1$. We inductively construct a sequence $(x_n)$ in $\mathcal{O}_K$ such that
    \begin{enumerate}[(i)]
        \item $f(x_n) \equiv 0 \pmod{\pi^{n+2r}}$.
        \item $x_{n+1} \equiv x_n \pmod{\pi^{n+r}}$.
    \end{enumerate}
    Take $x_1 = a$, so $f(x_1) \equiv 0 \pmod{\pi^{1+2r}}$. Now suppose we've constructed $x_1, \ldots, x_n$ satisfying the conditions. Then define $x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)}$. Since $x_n \equiv x_1 \pmod{\pi^{r+1}}$, $v(f'(x_n)) = v(f'(x_1)) = r$ and hence $\frac{f(x_n)}{f'(x_n)} \equiv 0 \pmod{\pi^{n+r}}$ by (i). It follows that $x_{n+1} \equiv x_n \pmod{\pi^{n+r}}$, so (ii) holds.
    \vspace{1mm}
     
    Note that for $X, Y$ indeterminates, we can write $f(X+Y) = f_0(X) + f_1(X)Y + f_2(X)Y^2 + \ldots$, where $f_i \in \mathcal{O}_K[X]$ and $f_0(X) = f(X), f_1(X) = f'(X)$. Thus $f(x_{n+1}) = f(x_n) + f'(x_n)c + f_2(x_n)c^2 + \ldots$ for $c = - \frac{f(x_n)}{f'(x_n)}$. Since $c \equiv 0 \pmod{\pi^{n+r}}$ and $v(f_i(x_n)) \ge 0$, we have $f(x_{n+1}) \equiv f(x_n) + c f'(x_n) \pmod{\pi^{n+2r+1}}$ (since the other terms vanish), but this is $\equiv 0 \pmod{\pi^{n+2r+1}}$, so (i) holds.
    \vspace{1mm}
     
    This gives the construction of $(x_n)$. Property (ii) implies that $(x_n)$ is Cauchy, so let $x \in \mathcal{O}_K$ be the limit, $x_n \to x$. Then $f(x) = \lim_{n \to \infty} f(x_n) = 0$ by property (i). Moreover, (ii) implies $a = x_1 \equiv x_n \pmod{\pi^{r+1}} ~\forall n$, so $a \equiv x \pmod{\pi^{r+1}}$, thus $|x-a| < |f'(a)|$.
    \vspace{1mm}
     
    For uniqueness, suppose $x'$ also satisfies $f(x') = 0$ and $|x'-a|<|f'(a)|$. Set $\delta = x' - x \neq 0$. Then $|x'-a|<|f'(a)|$ and $|x-a|<|f'(a)|$, so the ultrametric inequality implies $|\delta| = |x'-x| < |f'(a)| = |f'(x)|$ (since $a \equiv x \pmod{\pi^{r+1}}$). But \[
    0 = f(x') = f(x+\delta) = \underbrace{f(x)}_{=0} + f'(x)\delta + \underbrace{\delta^2 \ldots}_{|\cdot|\le |\delta|^2}.
    \]
    Hence $|f'(x) \delta|\le |\delta|^2 \implies |f'(x)| \le |\delta|$, a contradiction.
\end{proof}
\begin{cor}
    Let $(K,|\cdot|)$ be a complete discretely valued field, let $f(x) \in \mathcal{O}_K[x]$ and let $\overline{c} \in k = \mathcal{O}_K/\mathfrak{m}$ be a simple root of $\overline{f}(x) = f(x) \pmod{\mathfrak{m}} \in k[x]$. Then there exists a unique $x \in \mathcal{O}_K$ such that $f(x) = 0$ and $x \equiv \overline{c} \pmod{\mathfrak{m}}$.
\end{cor}
\begin{proof}
    Apply Hensel's lemma to a lift $c \in \mathcal{O}_K$ of $\overline{c}$. Then $|f(c)| < 1 = |f'(c)|^2$ since $f'(c)$ is a simple root.
\end{proof}
\begin{example}
    Consider $f(x) = x^2-2$, which has a simple root mod 7. Thus $\sqrt{2} \in \mathbb{Z}_p \subset \mathbb{Q}_7$.
\end{example}
\begin{cor}
    $\mathbb{Q}_p^\times/(\mathbb{Q}_p^\times)^2 \cong \begin{cases}
        (\mathbb{Z}/2\mathbb{Z})^2 \text{ if } p>2.\\
        (\mathbb{Z}/2\mathbb{Z})^3 \text{ if } p=2.
    \end{cases}$
\end{cor}
\begin{proof}
    First consider $p>2$. Let $b \in \mathbb{Z}_p^\times$. Applying the previous corollary to $f(x) = x^2-b$, we find that $b \in (\mathbb{Z}_p^\times)^2$ if and only if $b \in (\mathbb{F}_p^\times)^2$. Thus $\mathbb{Z}_p^\times \to \mathbb{F}_p^\times/(\mathbb{F}_p^\times)^2$ has kernel $(\mathbb{Z}_p^\times)^2$, so induces an isomorphism $\mathbb{Z}_p^\times/(\mathbb{Z}_p^\times)^2 \to \mathbb{F}_p^\times/(\mathbb{F}_p^\times)^2 \cong (\mathbb{Z}/2\mathbb{Z})$ (since $\mathbb{F}_p^{\times} = \mathbb{Z}/(p-1)\mathbb{Z}$).
    \vspace{1mm}
     
    We have an isomorphism $\mathbb{Z}_p^\times \times \mathbb{Z} \to \mathbb{Q}_p^{\times}$ given by $(u,n) \mapsto up^n$. Then $\mathbb{Q}_p^\times / (\mathbb{Q}_p^\times)^2 \cong (\mathbb{Z}/2\mathbb{Z})^2$.
    \vspace{1mm}
     
    If $p=2$, let $b \in \mathbb{Z}_2^\times$. Consider $f(x) = x^2 - b$, so $f'(x) = 2x \equiv 0 \pmod{2}$. Instead now let $b \equiv 1 \pmod{8}$. Then $|f(1)|_2 \le 2^{-3} < 2^{-2} = |f'(1)|_2^2$. Hensel's lemma now implies that $b \in (\mathbb{Z}_2^\times)^2 \iff b \equiv 1 \pmod{8}$. Thus $\mathbb{Z}_2^\times / (\mathbb{Z}_2^\times)^2 \cong (\mathbb{Z}/8\mathbb{Z})^\times = (\mathbb{Z}/2\mathbb{Z})^2$. Again using $\mathbb{Q}_2^\times \cong \mathbb{Z}_2^\times \times \mathbb{Z}$, we obtain that $\mathbb{Q}_2^\times/(\mathbb{Q}_2^\times)^2 \cong (\mathbb{Z}/2\mathbb{Z})^3$. 
\end{proof}
\textbf{Remark.} The proof of Hensel's lemma uses the iteration $x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)}$. We can think of the proof as the non--archimedean analogue of the Newton-Raphson method.

\begin{theorem}[Hensel's lemma, version 2]
    Let $(K, |\cdot|)$ be a complete discretely valued field and $f(x) \in \mathcal{O}_K[x]$. Suppose $\overline{f}(x) = f(x) \pmod{\mathfrak{m}} \in k[x]$ factorizes as $\overline{f}(x) = \overline{g}(x)\overline{h}(x) \in k[x]$ with $\overline{g}(x), \overline{h}(x)$ coprime. Then there is a factorization $f(x) = g(x)h(x)$ in $\mathcal{O}_K[x]$ with $\overline{g}(x) \equiv g(x) \pmod{\mathfrak{m}}$, $\overline{f}(x) \equiv f(x) \pmod{\mathfrak{m}}$ and $\text{deg}(\overline{g}) = \text{deg}(g)$.
\end{theorem}
\begin{proof}
    Left as an exercise on example sheet 1.
\end{proof}

\marginpar{17 Oct 2022, Lecture 5}

\begin{cor}
    Let $f(x) = a_nx^n + \ldots + a_0 \in k[x]$ with $a_0 \ldots a_n \neq 0$. If $f(x)$ is irreducible, then $|a_i|\le \max(|a_0|,|a_n|)$ for all $i$.
\end{cor}
\begin{proof}
    By scaling, assume $f(x) \in \mathcal{O}_K[x]$ with $\max(|a_i|) = 1$. Then we need to show that $\max(|a_0|,|a_n|)=1$. If not, let $r$ be minimal such that $|a_r|=1$, so $0<r<n$. Then $$\overline{f}(x) = x^r(a_r + \ldots a_n x^{n-r}) \pmod{\mathfrak{m}}.$$
    By Hensel's lemma version 2, $f(x)=g(x)h(x)$ with $\text{deg}(g)=r$, contradicting irreducibility.
\end{proof}

\section{Teichmüller lifts}
\begin{defn}
    A ring $R$ of characteristic $p>0$ is \textbf{perfect} if the Frobenius map $x \mapsto x^p$ is a bijection.
    \vspace{1mm}
     
    A field of characteristic $p$ is \textbf{perfect} if it is perfect as a ring.
\end{defn}
\textbf{Remark.} Since $\text{char }R = p$, $(x+y)^p = x^p + y^p$, so the Frobenius map is a ring homomorphism.

\begin{example}
    \begin{enumerate}[(i)]
        \item $\mathbb{F}_{p^n}$ is perfect and $\overline{\mathbb{F}_p}$ is perfect.
        \item Non--example. $\mathbb{F}_p[t]$ is not perfect since $t \not\in \text{Im}(\text{Frob})$.
        \item $\mathbb{F}_p(t^{\frac{1}{p^{\infty}}}) = \mathbb{F}_p\left(t,t^{\frac{1}{p}},t^{\frac{1}{p^2}},\ldots \right)$ is a perfect field, known as the \textbf{perfection} of $\mathbb{F}_p(t)$.
    \end{enumerate}
\end{example}
\textbf{Fact.} A field $k$ of characteristic $p>0$ is perfect if and only if any finite extension of $k$ is separable.

\begin{theorem}
    Let $(K,|\cdot|)$ be a complete discretely valued field such that the residue field $k = \mathcal{O}_K/\mathfrak{m}$ is a perfect field of characteristic $p>0$. Then there exists a unique map $[]: k \to \mathcal{O}_K$ such that 
    \begin{enumerate}[(i)]
        \item $a \equiv [a] \pmod{\mathfrak{m}} ~\forall a \in k$,
        \item $[ab] = [a][b] ~\forall a,b \in k$.
    \end{enumerate}
    Moreover, if $\text{char }\mathcal{O}_K = p$, then $[]$ is a ring homomorphism (i.e. it also preserves addition).
\end{theorem}
\begin{defn}
    The element $[a] \in \mathcal{O}_K$ is called the \textbf{Teichmüller lift} of $a$.
\end{defn}
\begin{lemma}
    Let $(K,|\cdot|)$ be a complete discretely valued field\footnote{(do we need the residue field to be perfect here? lectures said let $(K,|\cdot|)$ be as in above theorem).} and fix $\pi \in \mathcal{O}_K$ a uniformizer. Let $x,y \in \mathcal{O}_K$ be such that $x \equiv y \pmod{\pi^k}$ for $k\ge 1$. Then $x^p \equiv y^p \pmod{\pi^{k+1}}$. 
\end{lemma}
\begin{proof}
    Let $x = y + u\cdot \pi^k$ for some $u \in \mathcal{O}_K$. Then \begin{align*}
        x^p = \sum_{i=0}^{p} {p\choose i}y^{p-i}(u \pi^k)^{i} = y^p +\sum_{i=1}^{p} {p \choose i}y^{p-i}(u \pi^k)^{i}.
    \end{align*}
    Since $\text{char }\mathcal{O}_K/\pi \mathcal{O}_K = p$, we have $p \in \pi \mathcal{O}_K$. Thus ${p\choose i}y^{p-i}(u \pi^k)^i \in \pi^{k+1}\mathcal{O}_K ~\forall i\ge 1$, so $x^p \equiv y^p \pmod{\pi^{k+1}}$.
\end{proof}
\begin{proof}[Proof of Theorem 5.1]
    Let $a \in k$. For each $i>0$, we choose a lift $y_i \in \mathcal{O}_K$ of $a^{\frac{1}{p^i}}$ and define $x_i = y_i^{p^i}$. We claim that $(x_i)$ is a Cauchy sequence and its limit $x_i \to x$ is independent of the choice of $y_i$.
    \vspace{1mm}
     
    By construction, $y_i  \equiv  y_{i+1}^p \pmod{\pi}$. By our previous lemma and induction on $k$, we have that $y_i^{p^k} \equiv y_{i+1}^{p^{k+1}}\pmod{\pi^{k+1}}$ and hence $x_i \equiv x_{i+1} \pmod{\pi^{i+1}}$ (by taking $k=i$) and hence $(x_i)$ is Cauchy, so $x_i \to x \in \mathcal{O}_K$. \vspace{1mm}
     
    Suppose $(x_i')$ arises from another choice of $y_i'$ lifting $a_i^{\frac{1}{p^i}}$. Then $(x_i')$ is Cauchy and $x_i' \to x'$. Let \[
    x'' = \begin{cases}
        x_i &i \text{ even.}\\
        x_i' &i \text{ odd}.
    \end{cases}
    \]
    Then $x_i''$ arises from the lifting $y'' = \begin{cases}
        y_i &i \text{ even.}\\
    y_i' &i \text{ odd}.\end{cases}$. Then $x_i''$ is Cauchy with subsequences converging to both $x$ and $x'$, so $x = x'$, so our limit is independent of the choice of liftings $(y_i)$.
    \vspace{1mm}
    We define $[a] = x$. Then $x_i \equiv y_i^{p^i} \equiv \left(a^{\frac{1}{p^i}}\right)^{p^i} \equiv a \pmod{\pi}$, so $x \equiv a \pmod{\pi}$, giving us the first property.
    \vspace{1mm}
     
    Now let $b \in k$ and choose $u_i \in \mathcal{O}_K$ a lift of $b^{\frac{1}{p^i}}$ and let $z_i = u_i^{p^i}$. Then $[b] = \lim_{i \to \infty}z_i$. Now $u_iy_i$ is a lift of $(ab)^{\frac{1}{p^i}}$, hence $$[ab] = \lim_{i \to \infty} (u_iy_i)^{p^i} = \lim_{i \to \infty} x_i z_i = \lim_{i \to \infty} x_i \lim_{i \to \infty}z_i = [a][b],$$
    giving us the second property.
    \vspace{1mm}
    
    If $\text{char }K = p$, then $u_i+y_i$ is a lift of $a^{\frac{1}{p^i}}+b^{\frac{1}{p^i}} = \left(a+b \right)^{\frac{1}{p^i}}$. Then \[
    [a+b] = \lim_{i \to \infty} (y_i+u_i)^{p^i} = \lim_{i \to \infty}y_i^{p^i} + u_i^{p_i} = \lim_{i \to \infty}x_i + z_i = [a] + [b].
    \]
    Finally, it is easy to check that $[0] = 0$ and $[1] = 1$ (take $y_i=0$ and $y_i=1$). So $[]$ is a ring homomorphism.
    \vspace{1mm}
     
    For uniqueness, let $\phi: K \to \mathcal{O}_K$ be another map of the desired form. Then for $a \in k$, $\phi\left(a^{\frac{1}{p^i}}\right)$ is a lift of $a^{\frac{1}{p^i}}$. It follows that $$[a] = \lim_{i \to \infty} \phi\left(a^{\frac{1}{p^i}}\right)^{p^i} = \lim_{i \to \infty} \phi(a) = \phi(a).$$
\end{proof}
\begin{example}
    For $K=\mathbb{Q}_p$, what does $[]: \mathbb{F}_p \to \mathbb{Z}_p$ look like? Take $a \in \mathbb{F}_p^\times$, so $[a]^{p-1}=[a^{p-1}] = [1] = 1$. Hence $[a]$ is a $(p-1)^{\text{th}}$ root of unity.
\end{example}
More generally:
\begin{lemma}
    Let $(K,|\cdot|)$ be a complete discretely valued field. If $k = \mathcal{O}_K/\mathfrak{m} \subset \overline{\mathbb{F}_p}$ (which implies that $k$ is perfect), then $[a] \in \mathcal{O}_K$ is a root of unity $\forall a \in k^\times$.
\end{lemma}
\begin{proof}
    $a \in k^\times \implies a \in \mathbb{F}_{p^n}$ for some $n \implies [a]^{p^n-1}=[a^{p^n-1}] = [1] = 1$.
\end{proof}
\begin{theorem}
    Let $(K, |\cdot|)$ be a complete discretely valued field of characteristic $p > 0$. Assume $k = \mathcal{O}_K/\mathfrak{m}$ is perfect. Then $K \cong k((t))$.
\end{theorem}
\begin{proof}
    Since $K = \text{Frac}(\mathcal{O}_K)$, it suffices to show that $\mathcal{O}_K \cong k[[t]]$. For this, fix $\pi \in \mathcal{O}_K$ a uniformizer and let $[]: k \to \mathcal{O}_K$ be the Teichmüller map. Define $\phi : k[[t]] \to \mathcal{O}_K$ by $\phi\left(\sum_{i=0}^{\infty} a_i t^i \right) = \sum_{i=0}^{\infty} a_i \pi^i$. Then $\phi$ is a ring homomorphism since $[]$ is a ring homomorphism, but it is also a bijection by Proposition 3.3.
\end{proof}

\section{Extensions of complete valued fields}

\marginpar{19 Oct 2022, Lecture 6}

\begin{theorem}
    Let $(K,|\cdot|)$ be a complete discretely valued field and let $L/K$ be a finite extension of degree $n$. Then:
    \begin{enumerate}[(i)]
        \item $|\cdot|$ extends uniquely to an absolute value $|\cdot|_L$ on $L$ defined by $$|y|_L = |N_{L/K}(y)|^{1/n}.$$
        \item $L$ is complete with respect to $|\cdot|_L$.
    \end{enumerate}
\end{theorem}
\textbf{Recall.} If $L/K$ is a finite extension, then $N_{L/K}: L \to K$ is defined by $N_{L/K}(y) = \det_K(\text{mult}(y))$ where $\text{mult}(y): L \to L$ is the $K$--linear map given by multiplication by $y$.
\vspace{1mm}
 
\textbf{Facts:} 
\begin{itemize}
    \item The norm is multiplicative, i.e. $N_{L/K}(xy) = N_{L/K}(x)N_{L/K}(y)$.
    \item Let $X^n + a_{n-1}X^{n-1}+\ldots+a_0 \in K[X]$ be the minimal polynomial of $y \in L$. Then $N_{L/K}(y) = \pm a_0^m$ for some $m\ge 1$. In particular, $N_{L/K}(x)=0 \iff x = 0$.
\end{itemize} 
\begin{defn}
    Let $(K,|\cdot|)$ be a nonarchimedean valued field and $V$ a vector spce over $K$. Then a \textbf{norm} on $V$ is a function $||\cdot || : V \to \mathbb{R}_{\ge 0}$ satisfying
    \begin{itemize}
        \item $||x|| = 0 \iff x = 0$.
        \item $||\lambda x|| = |\lambda| \cdot ||x|| ~\forall x \in V, \lambda \in K$.
        \item $||x+y|| \le \max(||x||,||y||) ~\forall x,y \in V$. 
    \end{itemize}
\end{defn}
\begin{example}
    If $V$ is finite--dimensional and $e_1,\ldots,e_n$ is a basis for $V$, then the \textbf{sup norm} $||\cdot ||_{\text{sup}}$ on $V$ is defined by $||x||_{\text{sup}} = \max_i |x_i|$, where $x = \sum_{i=1}^{n} x_ie_i$.
\end{example}
\textbf{Exercise}: $||\cdot ||_{\text{sup}}$ is a norm.
\begin{defn}
    Two norms $||\cdot ||_1, ||\cdot ||_2$ on $V$ are \textbf{equivalent} if there exist constants $C, D \in \mathbb{R}_{>0}$ such that \[
    C ||x||_1 \le ||x||_2 \le D ||x||_1 ~\forall x \in V.
    \]
\end{defn}
\textbf{Fact.} A norm defines a topology on $V$ and equivalent norms induce the same topology (since an open ball in one topology is both contained in and contains an open ball in the other topology).

\begin{prop}
    Let $(K,|\cdot|)$ be complete and nonarchimedean and let $V$ be a finite dimensional vector space over $K$. Then $V$ is complete with respect to $||\cdot ||_{\text{sup}}$.
\end{prop}
\begin{proof}
    Let $(v_i)$ be a Cauchy sequence in $V$ and let $e_1,\ldots,e_n$ be a basis for $V$. Write $V_i = \sum_{j=1}^{n} x_j^i e_j$, then $(x^i_j)_{i=1}^{\infty}$ is a Cauchy sequence in $K$. Let $x_j^i \to x_j \in K$, then we can check that $v_i \to v = \sum_{j=1}^{n} x_je_j$.
\end{proof}
\begin{theorem}
    Let $(K,|\cdot|)$ be complete and nonarchimedean and let $V$ be a finite dimensional vector space over $K$. Then any two norms on $V$ are equivalent. In particular, $V$ is complete with respect to any norm.
\end{theorem}
\begin{proof}
    Since equivalence defines an equivalence relation on the set of norms, it suffices to show that any norm $||\cdot ||$ is equivalent to the sup norm $||\cdot ||_{\text{sup}}$ with respect to some basis. Let $e_1,\ldots,e_n$ be a basis for $V$.
    \vspace{1mm}
     
    For the upper bound, set $D = \max ||e_i||$. Then if $x = \sum_{i=1}^{n} x_i e_i$, then $||x|| = \max_i ||x_i e_i|| = \max_i |x_i|||e_i|| \le D \max_i |x_i| = D ||x||_{\text{sup}}$.
    \vspace{1mm}
     
    To find $C$ such that $C ||\cdot ||_{\text{sup}} \le ||\cdot ||$, we induct on $n = \text{dim }V$. If $n=1$, then $||x|| = ||x_1 e_1|| = |x_1|||e_1|| = ||x||_{\text{sup}}||e_1||$, so take $C = ||e_1||$.
    \vspace{1mm}
     
    For $n>1$, set $V_i = \langle e_1,\ldots,e_{i-1}, e_{i+1},\ldots,e_n \rangle$. By induction, the norm on $V_i$ is equivalent to the sup norm, so $V_i$ is complete with respect to $||\cdot||$, hence closed. Then the translate $e_i + V_i$ is also closed for all $i$, hence \[
    S = \bigcup_{i=1}^n e_i + V_i
    \]
    is a closed subset not containing zero. Hence $\exists C > 0$ such that $S \cap B(0,C) = \varnothing$, where $B(0,c) = \{x \in V \mid ||x||<C\}$. We claim this $C$ works. To see this, let $0 \neq x = \sum_{i=1}^{n} x_ie_i$ and suppose $|x_j| = \max_i |x_i|$. Then $||x||_{\text{sup}} = |x_j|$ and $\frac{1}{x_j}x \in S$ (since the $j^{\text{th}}$ coefficient will be equal to 1). Thus $||\frac{1}{x_j}x||\ge C$, so $||x||\ge C |x_j| = C ||x||_{\text{sup}}$.
    \vspace{1mm}
     
    Finally, $V$ is complete since it is complete with respect to $||\cdot||_{\text{sup}}$.
\end{proof}
\begin{proof}[Proof of Theorem 6.1]
    We first show that $|\cdot|_L = |N_{L/K}(\cdot )|^{1/n}$ satisfies the three absolute value axioms.
    \begin{enumerate}[(i)]
        \item $|y|_L = 0 \iff |N_{L/K}(y)|^{1/n} = 0 \iff N_{L/K}(y) = 0 \iff y = 0$.
        \item $|y_1y_2|_L = |N_{L/K}(y_1y_2)|^{1/n} = |N_{L/K}(y_1)|^{1/n}|N_{L/K}(y_2)|^{1/n} = |y_1|_L|y_2|_L$.
        \item For this, we need some preparation:
    \end{enumerate}
    \begin{defn}
        Let $R \subset S$ be a subring. We say $s \in S$ is \textbf{integral} over $R$ if $s$ is a root of a monic polynomial with coefficients in $R$, i.e. monic $f \in R[X]$ such that $f(s)=0$.
        \vspace{1mm}
         
        The \textbf{integral closure} $R^{\text{int}(S)}$ of $R$ in $S$ is the set of elements of $S$ that are integral over $R$, i.e. \[
        R \subset R^{\text{int}(S)} = \{s \in S \mid s \text{ is integral over }R\}.
        \]
        We say $R$ is \textbf{integrally closed} in $S$ if $R^{\text{int}(S)} = R$.
    \end{defn}
    \begin{prop}
        $R^{\text{int}(S)}$ is a subring of $S$. Moreover, $R^{\text{int}(S)}$ is integrally closed in $S$.
    \end{prop}
    \begin{proof}
        Exercise on example sheet 2.
    \end{proof}
    \begin{lemma}
        Let $(K,|\cdot|)$ be a nonarchimedean valued field. Then $\mathcal{O}_K$ is integrally closed in $K$.
    \end{lemma}
    \begin{proof}
        Let $x \in K$ be integral over $\mathcal{O}_K$. WLOG assume $x \neq 0$. Let $f(X) = X^n + a_{n-1}X^{n-1}+\ldots+a_0 \in \mathcal{O}_K[X]$ such that $f(x)=0$. Then \[
        x = -a_{n-1} - \ldots - a_0 \frac{1}{x^{n-1}}.
        \] 
        If $|x|>1$, then we have that $\left|-a_{n-1}- \ldots - a_0\frac{1}{x^{n-1}}\right|\le 1$ by the ultrametric inequality, contradiction. Thus $|x| \le 1$, so $x \in \mathcal{O}_K$.
    \end{proof}
    Now we show (iii): Set $\mathcal{O}_L = \{y \in L \mid |y|_L \le 1\}$. We claim that $\mathcal{O}_L$ is the integral closure of $\mathcal{O}_K$ inside $L$. In particular, $\mathcal{O}_L$ is a subring of $L$. 
    \vspace{1mm}
     
    Assuming this, let $x, y \in L$ and WLOG assume $|x|_L \le |y|_L$. Then we he $\left|\frac{x}{y}\right|_L\le 1 \implies \frac{x}{y} \in \mathcal{O}_L$. Since $\mathcal{O}_L$ is a ring, $1 \in \mathcal{O}_L$, so $1 + \frac{x}{y} \in \mathcal{O}_L$ and hence $\left|1 +\frac{x}{y}\right|_L \le 1$, so $|x+y|_L \le |y|_L = \max (|x|_L, |y|_L)$, giving the ultrametric inequality property.

    \marginpar{21 Oct 2022, Lecture 7}
    
    To prove the claim, take $0 \neq y \in L$ and let $f(X) = X^d + a_{d-1}X^{d-1} + \ldots + a_0 \in K[X]$ be the minimal monic polynomial for $y$. We claim $y$ is integral over $\mathcal{O}_K \iff f(X) \in \mathcal{O}_K[X]$.
    \vspace{1mm}
     
    $(\impliedby)$: This direction is clear.
    \vspace{1mm}
     
    $(\implies )$: Let $g(x) \in \mathcal{O}_K[X]$ be monic such that $g(y)=0$. Then $f \mid g$ in $K[X]$ and hence every root of $f$ is a root of $g$. Hence every root of $f$ considered in $\overline{K}$ is integral over $\mathcal{O}_K$. Hence the $a_i$ are integral over $\mathcal{O}_K$ for $0\le i \le d-1$. Hence $a_i \in \mathcal{O}_K$ by a lemma from last time.
    \vspace{1mm}
     
    By the corollary of the second version of Hensel's lemma, $|a_i|\le \max(|a_0|,1)$. By a property of the norm $N_{L/K}$, we have $N_{L/K}(y) = \pm a_0^m \in \mathcal{O}_K$. Hence $y \in \mathcal{O}_L \iff |N_{L/K}(y)|\le 1 \iff |a_0|\le 1$, so by our corollary this happens $\iff |a_i|\le 1~\forall i$, i.e. $a_i \in \mathcal{O}_K ~\forall i$, so $y$ is integral.
    \vspace{1mm}
     
    Since $N_{L/K}(x)=x^n$ for $x \in K$, $|x|_L$ extends $|\cdot|$ on $K$. If $|\cdot|_L'$ is another absolute value on $L$ extending $|\cdot|$, then $|\cdot|_L, |\cdot|_L'$ are norms on $L$, which are equivalent and hence induce the same topology on $L$, so $|\cdot|_L' = |\cdot|_L^c$ for some $c>0$. But since they both extend $|\cdot|$ on $K$, we must have $c=1$.
    \vspace{1mm}
     
    (ii): Theorem 6.3 implies the result, as $L$ is complete with respect to the sup norm.
\end{proof}
\begin{cor}
    Let $(K,|\cdot|)$ be a complete, nonarchimedean discretely valued field and $L/K$ a finite extension. Then
    \begin{enumerate}[(i)]
        \item $L$ is discretely valued with respect to $|\cdot|_L$.
        \item $\mathcal{O}_L$ is the integral closure of $\mathcal{O}_K$ in $L$.
    \end{enumerate}
\end{cor}
\begin{proof}
    \begin{enumerate}[(i)]
        \item Fix $v$, the valuation on $K$ responding to our absolute value, and let $v_L$ be the valuation on $L$ extending $v$. Let $n = [L:K]$. For $y \in L^\times$, $|y|_L = |N_{L/K}(y)|^{1/n}$, so $v_L(y)=\frac{1}{n}v(N_{L/K}(y))$, so $v_L(L^\times) \subset \frac{1}{n}v(K^{\times})$. Since $v(K^\times)$ is discrete, so is $v_L$.
        \item This was proved in the proof of the previous theorem.
    \end{enumerate}
\end{proof}
\begin{cor}
    Let $(K, |\cdot|)$ be complete, nonarchimedean, and discretely valued and let $\overline{K}/K$ be the algebraic closure of $K$. Then $|\cdot|$ extends uniquely to an absolute value $|\cdot|_{\overline{K}}$ on $\overline{K}$.
\end{cor}
\begin{proof}
    Let $x \in \overline{K}$, then $x \in L$ for some finite extension $L/K$. Define $|\cdot|_{\overline{K}} = |x|_L$. This is well--defined (i.e. independent of $L$) by uniqueness in Theorem 6.1 (for any $L,L'$, consider an extension containing both).
    \vspace{1mm}
     
    The axioms for $|x|_{\overline{K}}$ to be an absolute value can be checked over finite extensions.
    \vspace{1mm}
     
    Uniqueness again follows from the finite case: if two absolute values disagree on some value, then consider a finite extension containing that value.
\end{proof}
\textbf{Remark.} $|\cdot|_{\overline{K}}$ on $\overline{K}$ is never discrete. For example, if $K = \mathbb{Q}_p$, then $\sqrt[n]{p} \in \overline{\mathbb{Q}_p}$ and $\forall n\ge 0$, $v_p(\sqrt[n]{p}) = \frac{1}{n}v_p(n) = \frac{1}{n}$, giving a non--discrete valuation. Furthermore, $\overline{\mathbb{Q}_p}$ is not complete with respect to $|\cdot |_{\overline{\mathbb{Q}}_p}$. Showing this is an exercise on example sheet 2. On the sheet we also show that if we take $\mathbb{C}_p$, the completion of $\overline{\mathbb{Q}_p}$ with respect to $|\cdot|_{\overline{\mathbb{Q}_p}}$, then $\mathbb{C}_p$ is algebraically closed.

\begin{prop}
    Let $L/K$ is a finite extension of complete discretely valued fields with $n = [L:K]$. Assume that
    \begin{enumerate}[(i)]
        \item $\mathcal{O}_K$ is compact.
        \item The extension $k_{L}/k$ of residue fields is finite and separable.
    \end{enumerate}
    Then there exists $\alpha \in \mathcal{O}_L$ such that $\mathcal{O}_L = \mathcal{O}_K[\alpha]$.
\end{prop}
\textbf{Remark.} We will later see that (i) implies (ii).
\begin{proof}
    We'll choose $\alpha \in \mathcal{O}_L$ such that:
    \begin{enumerate}[(i)]
        \item $\exists \beta \in \mathcal{O}_K[\alpha]$ a uniformizer for $\mathcal{O}_L$.
        \item $\mathcal{O}_K[\alpha] \to k_L$ is surjective.
    \end{enumerate}
    First note that $k_L/k$ is separable, so $\exists \overline{\alpha} \in k$ such that $k_L = k(\overline{\alpha})$. Let $\alpha \in \mathcal{O}_L$ be a lift of $\overline{\alpha}$ and $g(X) \in \mathcal{O}_K[X]$ a monic lift of the minimal polynomial of $\overline{\alpha}$. Also fix $\pi_L \in \mathcal{O}_L$ a uniformizer. Then $\overline{g}(X) \in k[X]$ is irreducible and separable, so $\overline{\alpha}$ is a simple root of $\overline{g}$, so $g(\alpha) \equiv 0 \pmod{\pi_L}$ and $g'(\alpha) \not\equiv 0 \pmod{\pi_L}$.
    \vspace{1mm}
     
    If $g(\alpha) \equiv  0 \pmod{\pi_L^2}$, then \[
    g(\alpha + \pi_L) \equiv  g(\alpha) + \pi_L g'(\alpha) \pmod{\pi_L^2}.
    \]
    Thus $v_L(g(\alpha+\pi_L)) = v_L(\pi_Lg'(\alpha)) = v_L(\pi) = 1$ for $v_L$ the normalized valuation on $L$. Hence either $v_L(g(\alpha))= 1$ or $v_L(\gamma(\alpha+\pi_L)) = 1$. Possibly replacing $\alpha$ by $\alpha + \pi_L$, we may assume that $g(\alpha)$ is a uniformizer, i.e. $v_L(g(\alpha)) = 1$.
    \vspace{1mm}
     
    Now set $\beta = g(\alpha) \in \mathcal{O}_K[\alpha]$, a uniformizer. Then $\mathcal{O}_K[\alpha] \subset L$ is the image of a continuous map $\mathcal{O}_K^n \to L$ given by $(x_0,\ldots,x_{n-1}) \mapsto \sum_{i=0}^{n-1} x_i \alpha^i$. Since $\mathcal{O}_K$ is compact, $\mathcal{O}_K[\alpha]$ is compact, hence closed.
    \vspace{1mm}
     
    We have a closed subring of $\mathcal{O}_L$, so to show it is $\mathcal{O}_L$, it is enough to show it is dense. Since $k_L = k(\overline{\alpha})$, $\mathcal{O}_K[\alpha]$ contains a set of coset representatives for the residue field $k_L = \mathcal{O}_L/\beta \mathcal{O}_L$. Take $y \in \mathcal{O}_L$. By Proposition 3.3, we can write $y = \sum_{i=0}^{\infty} \lambda_i \beta^i$ with $\lambda_i \in \mathcal{O}_K[\alpha]$. Then $y_m = \sum_{i=0}^{m} \lambda_i \beta^i \in \mathcal{O}_K[\alpha]$ gives a Cauchy sequence converging to $y$. Then $y \in \mathcal{O}_K[\alpha]$ since $\mathcal{O}_K[\alpha]$ is closed.
\end{proof}
\section{Local fields}
\begin{defn}
    Let $(K,|\cdot|)$ be a valued field. We say $K$ is a \textbf{local field} if it is complete and locally compact (i.e. every point contains a compact neighborhood).
\end{defn}
\begin{example}
    $\mathbb{R}$ and $\mathbb{C}$ are local fields.
\end{example}
\begin{prop}
    Let $(K,|\cdot|)$ be a nonarchimedean complete valued field. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $K$ is locally compact (so $K$ is a nonarchimedean local field).
        \item $\mathcal{O}_K$ is compact.
        \item The associated valuation $v$ is discrete and $k = \mathcal{O}_K/\mathfrak{m}$ is finite.
    \end{enumerate}
\end{prop}
\begin{proof}
    \marginpar{24 Oct 2022, Lecture 8}
    (i) $\implies $ (ii): Let $\mathcal{U} \ni 0$ be a compact neighborhood of 0 (i.e. $0 \in \mathcal{U} \subset K$ for $U$ open, $K$ compact). Then $\exists x \in \mathcal{O}_K$ such that $x \mathcal{O}_K \subset \mathcal{U}$. Since $x \mathcal{O}_K$ is closed, it is compact, so $\mathcal{O}_K$ is compact (as it is homeomorphic to $x \mathcal{O}_K$ by the homeomorphism $x \mathcal{O}_K \stackrel{\times x^{-1}}{\to} \mathcal{O}_K$).
    \vspace{1mm}
     
    (ii) $\implies$ (i): $\mathcal{O}_K$ compact $\implies a + \mathcal{O}_K$ compact $\forall a \in K$, so $K$ is locally compact.
    \vspace{1mm}
     
    (ii) $\implies $ (iii): Let $x \in \mathfrak{m}$ and let $A_x \subset \mathcal{O}_K$ be the set of coset representatives for $\mathcal{O}_K/x \mathcal{O}_K$. Then $\mathcal{O}_K = \bigcup_{y \in A_x} (y+ x\mathcal{O}_K)$, which is a disjoint open cover. By compactness, $A_x$ is finite. Hence $\mathcal{O}_K/x \mathcal{O}_K$ is finite and so $\mathcal{O}_K/\mathfrak{m}$ is finite. Now suppose $v$ is not discrete. Then let $x=x_1,x_2,x_3,\ldots$ be elements such that $v(x_1) > v(x_2) > \ldots > 0$. Then $x \mathcal{O}_K \subsetneq x_2 \mathcal{O}_K \subsetneq x_3 \mathcal{O}_K \subsetneq \ldots \subsetneq\mathcal{O}_K$. But $\mathcal{O}_K/x \mathcal{O}_K$ is finite, so it can only have finitely many subgroups, a contradiction.
    \vspace{1mm}
     
    (iii) $\implies $ (ii): Since $\mathcal{O}_K$ is a metric space, it suffices to show that $\mathcal{O}_K$ is sequentially compact, i.e. that every sequence has a convergent subsequence. Let $(x_n)$ be a sequence in $\mathcal{O}_K$ and fix $\pi \in \mathcal{O}_K$ a uniformizer. Note that $\pi^i \mathcal{O}_K/\pi^{i+1}\mathcal{O}_K \cong k$, so $\mathcal{O}_K/\pi^i \mathcal{O}_K$ is finite $\forall i$ (as $\mathcal{O}_K \supset \pi \mathcal{O}_K \supset \ldots \supset \pi^i \mathcal{O}_K$ are all finite). Since $\mathcal{O}_K/\pi \mathcal{O}_K$ is finite, $\exists a_1 \in \mathcal{O}_K / \pi \mathcal{O}_K$ and a subsequence $(x_{1,n})_{n=1}^{\infty}$ such that $x_{1,n} \equiv a_1 \pmod{\pi}$. Since $\mathcal{O}_K/ \pi^2 \mathcal{O}_K$ is finite, $\exists a_2 \in \mathcal{O}_K/ \pi^2 \mathcal{O}_K$ and a subsequence $(x_{2,n})_{n=1}^{\infty}$ of $(x_{1,n})$ such that $x_{2,n} \equiv a_2 \pmod{\pi^2}$. Continuing in this fashion, we obtain sequences $(x_{i,n})_{n=1}^{\infty}$ for $i = 1,2,3,\ldots $ such that 
    \begin{enumerate}[(i)]
        \item $(x_{i+1,n})$ is a subsequence of $(x_{i,n})$ for all $i$.
        \item For any $i$, $\exists a_i \in \mathcal{O}_K/\pi^i \mathcal{O}_K$ such that $x_{i,n} \equiv a_i \pmod{\pi^i}$ for all $n$.
    \end{enumerate}
    Then $a_i \equiv a_{i+1} \pmod{\pi^i}$. Now choose $y_i = x_{i,i}$. This defines a subsequence of $(x_n)$ with $y_i \equiv a_i \equiv a_{i+1} \equiv y_{i+1} \pmod{ \pi^i}$. Thus $(y_i)$ is Cauchy, hence converges by completeness.
\end{proof}
\begin{example}
    \begin{enumerate}[(i)]
        \item $\mathbb{Q}_p$ is a local field, as it is discretely valued and has finite residue field $\mathbb{F}_p$.
        \item $\mathbb{F}_p((t))$ is a local field.
    \end{enumerate}
\end{example}
More on inverse limits: Again let $(A_n)_{n=1}^{\infty}$ be a sequence of sets/groups/rings and let $\phi_n : A_{n+1} \to A_n$ be homomorphisms (transition maps).
\begin{defn}
    Assume each $A_n$ is finite. Then the \textbf{profinite topology} on $A = \underset{n}{\varprojlim} A_n $ is the weakest topology on $A$ such that the projection maps $\theta_n : A \to A_n$ are continuous for all $n$, where all $A_n$ are equipped with the discrete topology.
\end{defn}
\textbf{Fact.} $A = \underset{n}{\varprojlim} A_n $ with the profinite topology is compact, totally disconnected and Hausdorff.
\begin{prop}
    Let $K$ be a nonarchimedean local field. Under the isomorphism $\mathcal{O}_K \cong \underset{n}{\varprojlim} \mathcal{O}_K/\pi^n \mathcal{O}_K$ (for $\pi \in \mathcal{O}_K$ a uniformizer), the topology on $\mathcal{O}_K$ coincides with the profinite topology.
\end{prop}
\begin{proof}[Proof sketch:]
    Check that the sets $B = \{a + \pi^n \mathcal{O}_K \mid n \in \mathbb{Z}_{\ge 1}, a \in \mathcal{O}_K\}$ are a basis of open sets in both topologies. 
    \vspace{1mm}
    
    For the topology arising from $|\cdot|$, this is clear (for any open ball, we can find a closed ball of smaller radius contained inside it). 
    \vspace{1mm}
    
    For the profinite topology, $\mathcal{O}_K \to \mathcal{O}_K/\pi^n \mathcal{O}_K$ is continuous if and only if $a + \pi^n \mathcal{O}_K$ is open $\forall a \in \mathcal{O}_K$.
\end{proof}
\begin{lemma}
    Let $K$ be a nonarchimedean local field and $L/K$ a finite extension. Then $L$ is a local field.
\end{lemma}
\begin{proof}
    Theorem 6.1 shows that $L$ is complete and discretely valued, so it suffices to show that $k_L = \mathcal{O}_L/\mathfrak{m}_L$ is finite. Let $\alpha_1,\ldots,\alpha_n \in L$ be a basis for $L$ as a $K$--vector space. Then $||\cdot||_{\text{sup}}$, the sup norm, is equivalent to $|\cdot|_L$, so there exists $r>0$ such that $\mathcal{O}_L \subset \{x \in L \mid ||x||_{\text{sup}} \le r\}$. Then take $a \in K$ such that $|a|\ge r$, then $\mathcal{O}_L \subset \bigoplus_{i=1}^n a \alpha_i \mathcal{O}_K \subset L$. But this is a finitely generated module over a PID, hence noetherian, so $\mathcal{O}_L$ is finitely generated as an $\mathcal{O}_K$--module, so $k_L$ is finitely generated over $k$.
\end{proof}
\begin{defn}
    A nonarchimedean valued field $(K, |\cdot|)$ has \textbf{equal characteristic} if $\text{char}(K) = \text{char}(k)$. Otherwise, $K$ has \textbf{mixed characteristic}.
\end{defn}
\begin{example}
    $\mathbb{Q}_p$ has mixed characteristic, whereas $\mathbb{F}_p((t))$ has equal characteristic $p>0$.
\end{example}
It turns out equal characteristic local fields are very easy to classify:
\begin{theorem}
    Let $K$ be a nonarchimedean local field of equal characteristic $p>0$.\footnote{Note the residue field of an an equal characteristic nonarchimedean local field is finite, so the characteristic must be positive.} Then \[
    K \cong \mathbb{F}_{p^n}((t))
    \]
    for some $n\ge 1$.
\end{theorem}
\begin{proof}
    $K$ is complete and discretely valued with $\text{char}(K)>0$. Moreover, $k$ is finite, so $k \cong \mathbb{F}_{p^n}$ for some $n$, so $k$ is perfect. Now by Theorem 5.4, $K \cong \mathbb{F}_{p^n}((t))$.
\end{proof}
\begin{lemma}
    An absolute value $|\cdot|$ on a field $K$ is nonarchimedean $\iff$ $|n|$ is bounded $\forall n \in \mathbb{Z}$.
\end{lemma}
\begin{proof}
    ($\implies $): Since $|-1|=|1|$, $|-n|=|n|$. Thus it suffices to show that $|n|$ is bounded for $n\ge 1$, but $|n| = |1| + \ldots |1| \le |1| = 1$ by the ultrametric inequality.
    \vspace{1mm}
     
    ($\impliedby$): Suppose $|n|\le B~\forall n \in \mathbb{Z}$. Take $x,y \in K$ with $|x|\le |y|$. Then we have 
    \begin{align*}
        |x+y|^m = \left|\sum_{i=0}^{m} {m\choose i}x^i y^{m-i}\right| \le \sum_{i=0}^{m} \left|{m\choose i}x^i y^{m-i}\right| \le |y|^m B (m+1).
    \end{align*}
    Take $n^{\text{th}}$ roots to get $|x+y|\le |y|\sqrt[n]{B(m+1)} \stackrel{n \to \infty}{\to} |y| = \max(|x|,|y|)$.
\end{proof}

\marginpar{26 Oct 2022, Lecture 9}

\begin{theorem}[Ostrowski's Theorem]
    Any nontrivial absolute value on $\mathbb{Q}$ is equivalent to either $|\cdot|_{\infty}$ or the $p$--adic absolute value $|\cdot|_{p}$ for some prime $p$.
\end{theorem}
\begin{proof}
    Case 1: $|\cdot|$ is archimedean. Then fix $b>1$ such that $|b|>1$, where such a $b$ exists by the previous lemma. Take $a>1$ another integer and write $b^n$ in base $a$, i.e. $b^n = c_ma^m + c_{m-1}a^{m-1} + \ldots + c_0$ for $0\le c_i<a$ and $c_m \neq 0$. 
    \vspace{1mm}
     
    Let $B = \max_{0\le c<a}(|c|)$, then $|b^n| \le (m+1)B \max(|a|^m,1)$. Hence 
    \begin{align*}
        |b| =& \underbrace{\left[(n \log_{a}b+1)B\right]^{1/n}}_{\to 1 \text{ as }n \to \infty}\max(|a|^{\log_a(b)},1) \\
        \implies & |b|\le \max(|a|^{\log_a(b)},1).
    \end{align*}
    Then $|a|>1$ and $|b|\le |a|^{\log_a(b)}$ ($\dagger$). Switching the roles of $a$ and $b$ we also find $|a|\le |b|^{\log_b(a)}$ ($\ddagger$). Then $(\dagger)$ and $(\ddagger)$ imply $\frac{\log|a|}{\log a} = \frac{\log |b|}{\log b} = \lambda \in \mathbb{R}_{> 0}$. Hence $|a| = a^{\lambda} ~\forall a \in \mathbb{Z}_{\ge 1}$, so $|x|=|x|_{\infty}^{\lambda}~\forall x \in \mathbb{Q}$, so $|\cdot|$ is equivalent to $|\cdot|_{\infty}$.
    \vspace{1mm}
     
    Case 2: $|\cdot|$ is non--archimedean. As in the previous inequality, we have $|n|\le 1 ~\forall n \in \mathbb{Z}$. Since this absolute value is nontrivial, $\exists n \in \mathbb{Z}_{\ge 1}$ such that $|n|<1$. Write $n = p_1^{e_1}\ldots p_r^{e_r}$. Then $|p|<1$ for some $p \in \{p_1,\ldots,p_r\}$. Now suppose $|q|<1$ for some prime $q \neq p$. Then write $1 = rp+sq$ for some $r,s \in \mathbb{Z}$. Then $1 = |rp+sq|\le \max(|rp|, |sq|) < 1$, a contradiction. Thus $|p| = \alpha<1$ and $|q| = 1$ for all primes $q \neq p$. Hence $|\cdot|$ is equivalent to $|\cdot|_p$.
\end{proof}
\begin{theorem}
    Let $(K,|\cdot|)$ be a nonarchimedean local field of mixed characteristic. Then $K$ is a finite extension of $\mathbb{Q}_p$.
\end{theorem}
\begin{proof}
    $K$ has mixed characteristic $\implies \text{char}(K) = 0 \implies \mathbb{Q} \subset K$. Also, $K$ is nonarchimedean $\implies |\cdot| |_{\mathbb{Q}} \sim |\cdot|_p$ for some $p$. Since $K$ is complete, $\mathbb{Q}_p \subset K$. Hence it suffices to show that $\mathcal{O}_K$ is finite as a $\mathbb{Z}_p$--module.
    \vspace{1mm}
     
    Let $\pi \in \mathcal{O}_K$ be a uniformizer and $v$ a normalized valuation on $K$. Set $v(p) = e$. Then $\mathcal{O}_K/p \mathcal{O}_K \cong \mathcal{O}_K/\pi^e \mathcal{O}_K$, which is finite (since $\pi^i \mathcal{O}_K/\pi^{i+1}\mathcal{O}_K \cong k$ is finite). $\mathbb{F}_p = \mathbb{Z}_p/ \mathbb{Z}_p \hookrightarrow \mathcal{O}_K/p\mathcal{O}_K$, so $\mathcal{O}_K/p \mathcal{O}_K$ is a finite--dimensional vector space over $\mathbb{F}_p$. Let $x_1,\ldots,x_n \in \mathcal{O}_K$ be coset representatives for the $\mathbb{F}_p$--basis of $\mathcal{O}_K/p \mathcal{O}_K$. Then \[
    \left\{\sum_{i=1}^{n} a_j x_j \mid a_j \in \{0,\ldots,p-1\}\right\}
    \] gives a set of coset representatives for $\mathcal{O}_K/p\mathcal{O}_K$.
    \vspace{1mm}
     
    Now apply Proposition 3.3 (ii) to write (for $a_{ij} \in \{0,\ldots,p-1\}$)
    \begin{align*}
        y = \sum_{i=0}^{\infty} \left(\sum_{j=1}^{n} a_{ij}x_j \right)p^i = \sum_{j=1}^{n} \underbrace{\left(\sum_{i=0}^{\infty} a_{ij}p^i \right)}_{\in \mathbb{Z}_p} x_j.
    \end{align*}
    Hence $\mathcal{O}_K$ is finite over $\mathbb{Z}_p$.
\end{proof}
On example sheet 2, we show that if $K$ is a complete archimedean field, then $K \cong \mathbb{R}$ or $K \cong \mathbb{C}$.
\vspace{1mm}
 
In summary, if $K$ is a local field, then either:
\begin{enumerate}[(i)]
    \item $K$ is archimedean, so $K \cong \mathbb{R}$ or $K \cong \mathbb{C}$.
    \item $K$ is nonarchimedean of equal characteristic, so $K \cong \mathbb{F}_{p^n}((t))$.
    \item $K$ is nonarchimedean of mixed characteristic, so $K$ is a finite extension of $\mathbb{Q}_p$.
\end{enumerate}

\section{Global fields}
\begin{defn}
    A \textbf{global field} is a field which is either 
    \begin{enumerate}[(i)]
        \item an algebraic number field.
        \item a global function field, i.e. a finite extension of $\mathbb{F}_p(t)$.
    \end{enumerate}
\end{defn}
\begin{lemma}
    Let $(K,|\cdot|)$ be a complete discretely valued field and $L/K$ a finite Galois extension with absolute value $|\cdot|_L$ extending $|\cdot|_K$. Then for $x \in L$ and $\sigma \in \text{Gal}(L/K)$, we have $|\sigma(x)|_L = |x|_L$.
\end{lemma}
\begin{proof}
    Since $x \mapsto |\sigma(x)|_L$ is an absolute value on $L$ (as we can check) extending $|\cdot|_K$, our result follows from uniqueness of extensions of absolute values.
\end{proof}
\begin{lemma}[Krasner's lemma]
    Let $(K,|\cdot|)$ be discretely valued and let $f(X) \in K[X]$ be a separable irreducible polynomial with roots $\alpha_1,\ldots,\alpha_n \in \overline{K}$, the separable closure of $K$. Suppose $\beta \in \overline{K}$ is such that \[
    |\beta-\alpha_1|< |\beta-\alpha_i| ~\forall 2\le i\le n.
    \]
    Then $\alpha_1 \in K(\beta)$.
\end{lemma}
\begin{proof}
    Let $L = K(\beta)$ and $L' = L(\alpha_1,\ldots,\alpha_n)$. Then $L'/L$ is a Galois extension. Let $\sigma \in \text{Gal}(L'/L)$. We have $|\beta - \sigma(\alpha_1)| = |\sigma(\beta-\alpha_1)| = |\beta-a_1|$ by the previous lemma and hence $\sigma(\alpha_1)=\alpha_1$, so $\alpha_1 \in K(\beta)$.
\end{proof}
\begin{prop}
    Let $(K,|\cdot|)$ be a complete discretely valued field and let $f(X) = \sum_{i=0}^{n} a_iX^i \in \mathcal{O}_K[X]$ be a separable irreducible monic polynomial. Let $\alpha \in \overline{K}$ be a root of $f$. Then $\exists \epsilon>0$ such that for any other polynomial $g(x) = \sum_{i=0}^{n} b_iX^i \in \mathcal{O}_K[X]$ monic with $|a_i-b_i|<\epsilon ~\forall i$, there exists a root $\beta$ of $g(x)$ such that $K(\alpha)=K(\beta)$.
\end{prop}
Informally, ''nearby'' polynomials define the same extension.
\begin{proof}
    Let $\alpha=\alpha_1,\alpha_2,\ldots,a_n \in \overline{K}$ be the roots of $f$, which are distinct. Then $f'(\alpha_1) \neq 0$. We choose $\epsilon$ such that $|g(\alpha_1)|<|f'(\alpha_1)|^2$ and $|f'(\alpha_1) - g'(\alpha_1)| < |f'(\alpha_1)|$. Then  $|g(\alpha_1)| < |f'(\alpha_1)^2| = |g'(\alpha_1)^2|$ (as all triangles are isosceles). By Hensel's lemma applied to the field $K(\alpha_1)$, there exists $\beta \in K(\alpha_1)$ such that $g(\beta)=0$ and $|\beta-\alpha_1|<|g'(\alpha_1)|$. But $|g'(\alpha_1)| = |f'(\alpha_1)| = \prod_{i=2}^{n} |\alpha_1-\alpha_i| \le |\alpha_1 - \alpha_i|$ for $2\le i\le n$ (using $|\alpha_1-\alpha_i|\le 1$ since $\alpha_i$ is integral as $f$ is monic). Since $|\beta-\alpha_1|<|\alpha_1-\alpha_i| = |\beta-\alpha_i|$ (again by isosceles condition), Krasner's lemma tells us that $\alpha \in K(\beta)$ and so $K(\alpha)=K(\beta)$.
\end{proof}

\end{document} 