\documentclass{article}
%build with recipe latexmk
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{fancyhdr}
\pagestyle{fancy}

\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{babel}
\usepackage{enumerate}
\usepackage{amsmath, amssymb, amsthm}
%\usepackage{a4wide}
\usepackage{float}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{setspace}
\setstretch{1.1}
\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true, %set true if you want colored links
    linktoc=all,     %set to all if you want both sections and subsections linked
    linkcolor=black,  %choose some color if you want links to stand out
}

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{example}{Example}[section]
\newtheorem{defn}{Definition}[section]

\title{Part III - Local Fields
    \\ \large
    Lectured by Rong Zhou 
}
 
\author{Artur Avameri}
\date{}
 
\setcounter{section}{-1}
 
\begin{document}
\maketitle
\tableofcontents
\newpage
 
\section{Introduction}

This is a first class in graduate algebraic number theory. Something we'd like to do is solve diophantine equations, e.g. $f(x_1,\ldots,x_r) \in \mathbb{Z}[x_1,\ldots,x_r]$. In general, solving $f(x_1,\ldots,x_r) = 0$ is very difficult. A simpler question we might consider is solving $f(x_1,\ldots,x_r) \equiv 0 \pmod{p}$, or $\pmod{p^2}, \pmod{p^3}$, etc. Local fields package all of this information together. 

\section{Basic Theory}
\subsection{Absolute values}
\begin{defn}
    Let $K$ be a field. An \textbf{absolute value} on $K$ is a function $|\cdot| : K \to \mathbb{R}_{\ge 0}$ satisfying:
    \begin{enumerate}[(1)]
        \item $|x| = 0 \iff x = 0$.
        \item $|xy| = |x||y| ~\forall x,y \in K$.
        \item $|x+y|\le |x|+|y| ~\forall x,y \in K$ (triangle inequality).
    \end{enumerate}
\end{defn}
We say that $(K, |\cdot|)$ is a \textbf{valued field}.
Examples:
\begin{itemize}
    \item Take $K=\mathbb{Q},\mathbb{R},\mathbb{C}$ with the usual absolute value $|a+ib| = \sqrt{a^2+b^2}$. We call this $|\cdot |_{\infty}$.
    \item For $K$ any field, we have the trivial absolute value $|x| = \begin{cases}
        0 & \text{ if } x = 0\\
        1 & \text{ else.}
    \end{cases}$
    We will ignore this in this course.
    \item Take $K= \mathbb{Q}$ and $p$ a prime. For $0 \neq x \in \mathbb{Q}$, write $x = p^n \frac{a}{b}$ where $(a,p)=(b,p)=1$. Then the \textbf{$p$--adic absolute value} is defined to be \[
    |x|_p = \begin{cases}
        0 & x=0\\
        p^{-n} & x = p^n\frac{a}{b}.
    \end{cases}
    \] 
    We can check the axioms:
    \begin{enumerate}[(1)]
        \item The first axiom is clear.
        \item $$|xy|_p = \left|p^{n+m}\frac{ac}{bd}\right|_p = p^{-(n+m)} = |x|_p|y|_p.$$
        \item WLOG let $m\ge n$. Then \[
        |x+y|_p = \left|p^n\left(\frac{ad+p^{m-n}bc}{bd}\right)\right|_p \le p^{-n} = \max(|x|_p, |y|_p).
        \]
    \end{enumerate}
\end{itemize}

Any absolute value $|\cdot |$ on $K$ induces a metric $d(x,y) = |x-y|$ on $K$, hence induces a topology on $K$.

\begin{defn}
    Suppose we have two absolute values $|\cdot |, |\cdot |'$ on $K$. We say these absolute values are \textbf{equivalent} if they induce the same topology. An equivalence class is called a \textbf{place}.
\end{defn}
\begin{prop}
    Let $|\cdot|, |\cdot|'$ be (nontrivial) absolute values on $K$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $|\cdot|$ and $|\cdot|'$ are equivalent.
        \item $|x| < 1 \iff |x|' < 1 ~\forall x \in K$.
        \item $\exists c \in \mathbb{R}_{>0}$ such that $|x|^c = |x'| ~\forall x \in K$.
    \end{enumerate}
\end{prop}
\begin{proof}
    (i) $\implies $(ii): $|x|<1 \iff x^n \to 0$ with respect to $|\cdot| \iff x^n \to 0$ with respect to $|\cdot|'$ (since the topologies are the same) $\iff |x|'<1$. 
    \vspace{1mm}
     
    (ii) $\implies $(iii): Note that $|x|^c = |x|' \iff c \log |x| = \log |x|'$. Take $a \in K^\times$ such that $|a| > 1$. This exists since $|\cdot|$ is nontrivial. We need to show that $\forall x \in K^\times,$\[
     \frac{\log |x|}{\log |a|} = \frac{\log|x|'}{\log|a|'}.
    \]
    Assume $\frac{\log |x|}{\log |a|} < \frac{\log|x|'}{\log|a|'}.$ Choose $m, n \in \mathbb{Z}$ such that $\frac{\log |x|}{\log |a|} < \frac{m}{n} < \frac{\log|x|'}{\log|a|'}.$ We then have 
    \begin{align*}
        &\begin{cases}
            &n \log |x| < m \log |a|\\
            &n \log |x|' > m \log|a|'
        \end{cases}\\
        \implies & \left|\frac{x^n}{a^m}\right|<1, \left|\frac{x^n}{a^m}\right|' > 1,
    \end{align*}
    a contradiction. The other inequality is analogous.
    \vspace{1mm}
     
    (iii) $\implies$ (i): Clear, since they have the same open balls.
\end{proof}

\textbf{Remark.} $|\cdot|_{\infty}^2$ on $\mathbb{C}$ is not an absolute value by our definition (doesn't satisfy the triangle inequality). Some authors replace the triangle inquality by the condition $|x+y|^{\beta} \le |x|^{\beta} + |y|^{\beta}$ for some fixed $\beta \in \mathbb{R}_{>0}$. The equivalence classes are the same in either case.

In this course, we will mainly be interested in the following:

\begin{defn}
    An absolute value $|\cdot|$ on $K$ is said to be \textbf{non-archimedean} if it satisfies the \textbf{ultrametric inequality} \[
    |x+y|\le \max(|x|,|y|).
    \]
    If $|\cdot|$ is not non-archimedean, we say it is \textbf{archimedean}. 
\end{defn}
\begin{example}
    \begin{itemize}
        \item $|\cdot|_{\infty}$ on $\mathbb{R}$ is archimedean.
        \item $|\cdot|_{p}$ on $\mathbb{Q}$ is non--archimedean.
    \end{itemize}
\end{example}

\begin{lemma}
    Let $(K, |\cdot|)$ be non--archimedean and $x,y \in K$. If $|x|<|y|$, then $|x-y|= |y|$.
\end{lemma}
\begin{proof}
    On the one hand, $|x-y|\le \max(|x|,|y|) = |y|$ (using $|x|=|-x|$).
    \vspace{1mm}
     
    On the other, $|y| \le \max(|x|, |x-y|) = |x-y|$.
\end{proof}

Convergence is easier in non--archimedean fields:
\begin{prop}
    Let $(K,|\cdot|)$ be non--archimedean and $(x_n)_{n=1}^{\infty}$ a sequence on $K$. If $|x_n-x_{n+1}| \to 0$, then $(x_n)_{n=1}^{\infty}$ is Cauchy. In particular, if $K$ is complete, then the sequence converges.
\end{prop}
\begin{proof}
    For $\epsilon > 0 $, choose $N$ such that $|x_n-x_{n+1}| < \epsilon$ for $n \ge N$. Then for $N<n<m$, \[
    |x_n - x_m| = |(x_n - x_{n+1}) + (x_{n+1} - x_{n+2}) + \ldots + (x_{m-1}-x_m)| < \epsilon,
    \]
    so $(x_n)$ is Cauchy.
\end{proof}
\begin{example}
    For $p=5$, we can construct a sequence in $\mathbb{Q}$ satisfying:
    \begin{enumerate}[(i)]
        \item $x_n^2+1 \equiv  0 \pmod{5^n}$,
        \item $x_n \equiv x_{n+1} \pmod{5^n}$.
    \end{enumerate}
    We construct it by induction. Take $x_1=2$. Now suppose we've constructed $x_n$ and write $x_n^2+1 = a\cdot 5^n$ and set $x_{n+1} = x_n + b\cdot 5^n$. We compute \[
    x_{n+1}^2 + 1 = x_n^2 + 2b x_n 5^n + b^2 5^{2n} + 1 = a5^n + 2bx_n 5^n + \underbrace{b^2 5^{2n}}_{\equiv 0 \text{ (mod }5^{n+1})} + 1. 
    \]
    Hence we choose $b$ such that $a+2bx_n \equiv 0 \pmod{5}$ and we're done. 
    \vspace{1mm}
     
    Now (ii) tells us that $(x_n)$ is Cauchy, but we claim it doesn't converge. Suppose it does, $x_n \to l \in \mathbb{Q}$. Then $x_n^2 \to l^2 \in \mathbb{Q}$. But by (i), $x_n^2 \to -1$, so $l^2 = -1$, a contradiction.
\end{example}
This tells us that $(\mathbb{Q}, |\cdot|_{5})$ is not complete.
\begin{defn}
    The $p$--adic numbers $\mathbb{Q}_p$ are the completion of $\mathbb{Q}$ with respect to $|\cdot|_p$.
\end{defn}

\marginpar{10 Oct 2022, Lecture 2}

Let $(K,|\cdot|)$ be a non--archimedean valued field. For $x \in K$ and $r \in \mathbb{R}_{>0}$, we define $B(x,r) = \{y \in K \mid |y-x|<r\}$ and $\overline{B} = \{y \in K \mid |y-x|\le r\}$ to be the open and closed balls of radius $r$.

\begin{lemma}
    \begin{enumerate}[(i)]
        \item If $z \in B(x,r)$, then $B(z,r) = B(x,r)$, i.e. open balls don't have centers.
        \item If $z \in \overline{B}(x,r)$, then $\overline{B}(x,r) = \overline{B}(z,r)$.
        \item $B(x,r)$ is closed.
        \item $\overline{B}(x,r)$ is open.
    \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}[(i)]
        \item Let $y \in B(x,r)$. Then $|x-y|<r \implies |z-y| = |(z-x) + (x-y)| \le \max(|z-x|,|x-y|) < r$, so $B(x,r) \subset B(z,r)$. The reverse inclusion is analogous.
        \item Analogous to (i) by replacing $<$ with $\le$.
        \item Let $y \in K \setminus B(x,r)$. If $z \in B(x,r) \cap B(y,r)$, then $B(x,r) = B(z,r) = B(y,r)$ by (i), so $y \in B(x,r)$, a contradiction. Hence $B(x,r) \cap B(y,r) = \varnothing$. Since $y$ was arbitrary, $K \setminus B(x,r)$ is open, so $B(x,r)$ is closed.
        \item If $z \in \overline{B}(x,r)$, then $B(z,r) \subset \overline{B}(z,r) \stackrel{\text{(ii)}}{=} \overline{B}(x,r)$.
    \end{enumerate}
\end{proof}

\subsection{Valuation rings}
\begin{defn}
    Let $K$ be a field. A \textbf{valuation} on $K$ is a function $v : K^\times \to \mathbb{R}$ such that 
    \begin{enumerate}[(i)]
        \item $v(xy) = v(x)+v(y)$.
        \item $v(x+y) \ge \min(v(x),v(y))$.
    \end{enumerate}
\end{defn}
Fix $0<\alpha<1$. If $v$ is a valuation on $K$, then $|x| = \begin{cases}
    \alpha^{v(x)} & x \neq 0\\
    0 & x = 0
\end{cases}$
determines a non--archimedean absolute value on $K$. Conversely, a non--archimedean absolute value on $K$ determines a valuation $v(x) = \log_{\alpha} |x|$.

\textbf{Remark.} We ignore the trivial evaluation $v(x)=0 ~\forall x \in K$, which  corresponds to the trivial absolute value.

\begin{defn}
    We say valuations $v_1,v_2$ are equivalent if $\exists c \in \mathbb{R}_{>0}$ such that $v_1(x) = cv_2(x) ~\forall x \in K^{\times}$.
\end{defn}
\begin{example}
    \begin{itemize}
        \item If $K=\mathbb{Q}$, $v_p(x) = -\log_p |x|_p$ is the $p$--adic valuation.
        \item Let $k$ be a field. Let $K=k(t) = \text{Frac}(k[t])$ be a rational function field. We let \[
        v\left(t^n \frac{f(t)}{g(t)}\right) = n
        \]
        for $f, g \in k[t]$, $f(0)\neq 0, g(0) \neq 0$. This is called a $t$--adic valuation.
        \item Let $K = k((t)) = \text{Frac}(k[[t]]) = \{\sum_{i=n}^{\infty} a_i t^i \mid a_i \in k, n \in \mathbb{Z}\}$, the field of formal Laurent series over $k$. We define \[
        v(\sum_{i}^{} a_i t^i) = \min \{i \mid a_i \neq 0\},
        \]
        the $t$--adic valuation on $K$.
    \end{itemize}
\end{example}
\begin{defn}
    Let $(K, |\cdot|)$ be a non--archimedean valued field. The \textbf{valuation ring} of $K$ is defined to be \[
    \mathcal{O}_K = \{x \in K \mid |x|\le 1\}.
    \]
    (i.e. the closed unit ball, $\mathcal{O}_K = \overline{B}(0,1)$).\footnote{Another alternative definition given was $\mathcal{O}_K = \{x \in K^{\times} \mid v(x) \ge  0\} \cup \{0\}$. Is this equivalent to the above?}
\end{defn}
\begin{prop}
    \begin{enumerate}[(i)]
        \item $\mathcal{O}_K$ is an open subring of $K$.
        \item The subsets $\{x \in K \mid |x|\le r\}$ and $\{x \in K \mid |x|< r\}$ for $r\le 1$ are open ideals in $\mathcal{O}_K$.
        \item $\mathcal{O}_K^\times = \{x \in K \mid |x|=1\}$.
    \end{enumerate}
\end{prop}
\begin{proof}
    \begin{enumerate}[(i)]
        \item We find:
        \begin{itemize}
            \item $|0|=0$ and $|1|=1$, so $0,1 \in \mathcal{O}_K$.
            \item If $x \in \mathcal{O}_K$, then $|-x|=|x| \implies -x \in \mathcal{O}_K$. 
            \item If $x,y \in \mathcal{O}_K$, then $|x+y|\le \max(|x|,|y|)\le 1$, so $x+y \in \mathcal{O}_K$. 
            \item If $x,y \in \mathcal{O}_K$, then $|xy| = |x||y| \le 1$, so $xy \in \mathcal{O}_K$.
        \end{itemize}
        Thus $\mathcal{O}_K$ is a subring, and since $\mathcal{O}_K = \overline{B}(0,1)$, it is open.
        \item Similar to (i), left as an exercise.
        \item Note that $|x||x^{-1}|= |x x^{-1}| = 1$. Thus $|x| = 1 \iff |x^{-1}| = 1 \iff x,x^{-1} \in \mathcal{O}_K \iff x \in \mathcal{O}_K^\times$.
    \end{enumerate}
\end{proof}

\textbf{Notation.} Let $\mathfrak{m} = \{x \in \mathcal{O}_K \mid |x|<1\}$. It turns out this is a maximal ideal in $\mathcal{O}_K$. Also let $\mathfrak{k} = \mathcal{O}_K/\mathfrak{m}$, the residue field. 

\begin{cor}
    $\mathcal{O}_K$ is a \textbf{local ring} (i.e. a ring with a unique maximal ideal) with unique maximal ideal $\mathfrak{m}$.
\end{cor}
\begin{proof}
    Let $\mathfrak{m'}$ be a maximal ideal. If $\mathfrak{m'} \neq \mathfrak{m}$, then $\exists x \in \mathfrak{m'}\setminus \mathfrak{m}$. Hence $|x|= 1$, so by (iii) above, $x$ is a unit, so $\mathfrak{m'}=R$, a contradiction.
\end{proof}

\begin{example}
    $K=\mathbb{Q}$ with $|\cdot|_p$. Then $\mathcal{O}_K = \mathbb{Z}_{(p)} = \{\frac{a}{b} \in \mathbb{Q} \mid p \nmid b\}$. In this case, $\mathfrak{m} = p\mathbb{Z}_{(p)}$ and $\mathfrak{k} = \mathbb{F}_p$.
\end{example}

\begin{defn}
    Let $v:K^{\times} \to \mathbb{R}$ be a valuation. If $v(K^{\times}) \cong \mathbb{Z}$, then we say $v$ is a \textbf{discrete valuation}. In this case, $K$ is said to be a \textbf{discretely valued field}. 
    \vspace{1mm}
     
    An element $\pi \in \mathcal{O}_K$ is said to be a \textbf{uniformizer} if $v(\pi)>0$ and $v(\pi)$ generates $v(K^\times)$.
\end{defn}
\begin{example}
    \begin{itemize}
        \item $K=\mathbb{Q}$ with the $p$--adic valuation and $K=k(t)$ with the $t$--adic valuation are discretely valued fields.
        \item $K=k(t)(t^{\frac{1}{2}}, t^{\frac{1}{4}}, t^{\frac{1}{8}},\ldots)$ with the $t$--adic valuation is not a discretely valued field.
    \end{itemize}
\end{example}
\textbf{Remark.} If $v$ is a discrete valuation, we can scale $v$, i.e. replace it with an equivalent valuation such that $v(K^\times) = \mathbb{Z}$. Such $v$ are called \textbf{normalized valuations}. Then $\pi$ is a uniformizer $\iff v(\pi) = 1$.

\begin{lemma}
    Let $v$ be a valuation on $K$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $v$ is discrete;
        \item $\mathcal{O}_K$ is a PID;
        \item $\mathcal{O}_K$ is Noetherian;
        \item $\mathfrak{m}$ is principal.
    \end{enumerate}
\end{lemma}
\begin{proof}
    (i) $\implies$ (ii): $\mathcal{O}_K \subset K$, so $\mathcal{O}_K$ is an integral domain. Let $I \subset \mathcal{O}_K$ be a nonzero ideal and pick $x \in I$ such that $v(x) = \min \{v(a) \mid a \in I, a \neq 0\}$, which exists as $v$ is discrete. Then we claim that $x \mathcal{O}_K = \{a \in \mathcal{O}_K \mid v(a)\ge v(x)\}$ is equal to $I$. The inclusion $x\mathcal{O}_K\subset I$ is clear, as $I$ is an ideal. For $x\mathcal{O}_K\supset I$, let $y \in I$, then $v(x^{-1}y)\ge 0 \implies y = x(x^{-1}y) \in x \mathcal{O}_K$.
    \vspace{1mm}
     
    (ii) $\implies $ (iii): Clear, as being a PID means every ideal is generated by one element, i.e. by finitely many. 
    \vspace{1mm}
     
    (iii) $\implies $ (iv): Write $\mathfrak{m} = x_1 \mathcal{O}_K +\ldots+ x_n \mathcal{O}_K$ and WLOG assume $v(x_1)\le v(x_2)\le \ldots\le v(x_n)$. Then $x_2,\ldots,x_n \in x_1 \mathcal{O}_K$, so $\mathfrak{m} = x_1 \mathcal{O}_K$.
    \vspace{1mm}
     
    (iv) $\implies $ (i): Let $\mathfrak{m} = \pi \mathcal{O}_K$ for some $\pi \in \mathcal{O}_K$ and let $c = v(\pi)$. Then if $v(x)>0$, i.e. $x \in \mathfrak{m}$, then $v(x) \ge c$. Thus $v(K^\times) \cap (0,c) = \varnothing$. Since $v(K^\times)$ is a subgroup of $(\mathbb{R}, +)$, we have $v(K^{\times}) = c\mathbb{Z}$.
\end{proof}

\end{document}